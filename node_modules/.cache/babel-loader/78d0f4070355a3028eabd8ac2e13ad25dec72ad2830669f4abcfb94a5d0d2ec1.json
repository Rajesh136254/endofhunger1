{"ast":null,"code":"import _objectSpread from\"/home/user/endofhunger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AdminPage(){// ── State ───────────────────────────────────────\nconst[activeTab,setActiveTab]=useState('menu');const[menuItems,setMenuItems]=useState([]);const[tables,setTables]=useState([]);const[categories,setCategories]=useState([]);// Modals\nconst[isMenuModalOpen,setIsMenuModalOpen]=useState(false);const[isTableModalOpen,setIsTableModalOpen]=useState(false);const[isQRModalOpen,setIsQRModalOpen]=useState(false);const[selectedTableForQR,setSelectedTableForQR]=useState(null);const[confirmModal,setConfirmModal]=useState({show:false,message:'',onConfirm:()=>{}});// Add New Category Inline\nconst[showNewCategoryInput,setShowNewCategoryInput]=useState(false);const[newCategoryName,setNewCategoryName]=useState('');// Form data\nconst[currentMenuItem,setCurrentMenuItem]=useState({});const[currentTable,setCurrentTable]=useState({});const[menuImagePreview,setMenuImagePreview]=useState(null);const[menuImageFile,setMenuImageFile]=useState(null);// Loading & Filters\nconst[isMenuLoading,setIsMenuLoading]=useState(false);const[isTablesLoading,setIsTablesLoading]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[selectedCategory,setSelectedCategory]=useState('');// Toast\nconst[toast,setToast]=useState({show:false,message:'',type:'success'});// Refs\nconst qrRefs=useRef({});const BASE_URL=window.location.origin;const API_URL='http://localhost:5000';// ── Helpers ─────────────────────────────────────\nconst showToast=useCallback(function(msg){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setToast({show:true,message:msg,type});setTimeout(()=>setToast({show:false,message:'',type:'success'}),3000);},[]);const openConfirm=(message,onYes)=>{setConfirmModal({show:true,message,onConfirm:onYes});};// ── API Calls ───────────────────────────────────\nconst loadMenu=useCallback(async()=>{setIsMenuLoading(true);try{const res=await fetch(\"\".concat(API_URL,\"/api/menu\"));const json=await res.json();if(json.success)setMenuItems(json.data||[]);}catch(err){showToast('Failed to load menu','error');}finally{setIsMenuLoading(false);}},[showToast,API_URL]);const loadTables=useCallback(async()=>{setIsTablesLoading(true);try{const res=await fetch(\"\".concat(API_URL,\"/api/tables\"));const json=await res.json();if(json.success)setTables(json.data||[]);}catch(_unused){showToast('Failed to load tables','error');}finally{setIsTablesLoading(false);}},[showToast,API_URL]);const loadCategories=useCallback(async()=>{try{const res=await fetch(\"\".concat(API_URL,\"/api/categories\"));const json=await res.json();if(json.success&&Array.isArray(json.data)){setCategories(json.data.filter(c=>c&&c.trim()!==''));}}catch(_unused2){setCategories(['Appetizer','Main Course','Dessert','Beverage','Salad']);}},[API_URL]);// ── Load data ───────────────────────────────────\nuseEffect(()=>{loadMenu();loadTables();loadCategories();},[loadMenu,loadTables,loadCategories]);// ── Load QRCode lib ─────────────────────────────\nuseEffect(()=>{const script=document.createElement('script');script.src='https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js';script.async=true;document.body.appendChild(script);return()=>{if(document.body.contains(script))document.body.removeChild(script);};},[]);// ── Generate QR codes ───────────────────────────\nuseEffect(()=>{if(typeof window.QRCode==='undefined'||tables.length===0)return;tables.forEach(table=>{const el=qrRefs.current[table.id];if(el&&!el.hasChildNodes()){new window.QRCode(el,{text:\"\".concat(BASE_URL,\"/customer.html?table=\").concat(table.table_number),width:200,height:200});}});},[tables,BASE_URL]);// Added BASE_URL to dependency array\n// ── Add New Category ────────────────────────────\nconst addNewCategory=async()=>{const name=newCategoryName.trim();if(!name||categories.includes(name)){showToast(name?'Category already exists':'Enter a name','error');return;}try{const res=await fetch(\"\".concat(API_URL,\"/api/categories\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name})});const json=await res.json();if(json.success){setCategories(prev=>[...prev,name]);setNewCategoryName('');setShowNewCategoryInput(false);showToast(\"Category \\\"\".concat(name,\"\\\" added!\"),'success');}else{showToast(json.message||'Failed to add category','error');}}catch(_unused3){showToast('Network error','error');}};// ── Handlers ───────────────────────────────────\nconst handleImageChange=e=>{const file=e.target.files[0];if(!file)return;setMenuImageFile(file);const reader=new FileReader();reader.onloadend=()=>setMenuImagePreview(reader.result);reader.readAsDataURL(file);};// ── Submit Handlers ─────────────────────────────\nconst handleMenuSubmit=async e=>{e.preventDefault();const f=new FormData(e.target);const id=f.get('id');const category=f.get('category');let image_url=currentMenuItem.image_url||null;if(menuImageFile){const promise=()=>new Promise(res=>{const r=new FileReader();r.onloadend=()=>res(r.result);r.readAsDataURL(menuImageFile);});image_url=await promise();}const payload={name:f.get('name'),description:f.get('description'),price_inr:parseFloat(f.get('price_inr')),price_usd:parseFloat(f.get('price_usd')),category,is_available:f.get('is_available')==='on',image_url};try{const url=id?\"\".concat(API_URL,\"/api/menu/\").concat(id):\"\".concat(API_URL,\"/api/menu\");const res=await fetch(url,{method:id?'PUT':'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const json=await res.json();if(json.success){closeMenuModal();loadMenu();loadCategories();// Refresh categories in case new one was used\nshowToast(id?'Item updated!':'Item added!','success');}else{showToast(json.message||'Failed to save','error');}}catch(_unused4){showToast('Save failed','error');}};const handleTableSubmit=async e=>{e.preventDefault();const f=new FormData(e.target);const id=f.get('id');const num=parseInt(f.get('table_number'),10);const payload={table_number:num,table_name:f.get('table_name')||null};try{const url=id?\"\".concat(API_URL,\"/api/tables/\").concat(id):\"\".concat(API_URL,\"/api/tables\");const res=await fetch(url,{method:id?'PUT':'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const json=await res.json();if(json.success){closeTableModal();loadTables();showToast(id?'Table updated':'Table added','success');if(!id)setTimeout(()=>showQRModal(_objectSpread(_objectSpread({},payload),{},{id:json.data.id,table_number:num})),300);}else showToast(json.message||'Failed','error');}catch(_unused5){showToast('Save error','error');}};// ── DELETE MENU ITEM (NOW REALLY WORKS) ─────────\nconst deleteMenuItem=id=>{openConfirm('Delete this menu item permanently?',async()=>{try{const res=await fetch(\"\".concat(API_URL,\"/api/menu/\").concat(id),{method:'DELETE'});const json=await res.json();if(json.success){setMenuItems(prev=>prev.filter(item=>item.id!==id));showToast('Item deleted successfully!','success');loadCategories();// Refresh in case category becomes empty\n}else{showToast(json.message||'Cannot delete (used in orders)','error');}}catch(err){console.error(err);showToast('Delete failed','error');}setConfirmModal({show:false});});};const deleteTable=id=>{openConfirm('Delete this table & QR code?',async()=>{try{const res=await fetch(\"\".concat(API_URL,\"/api/tables/\").concat(id),{method:'DELETE'});const json=await res.json();if(json.success){loadTables();showToast('Table deleted','success');}}catch(_unused6){showToast('Error','error');}});};// ── Modal Controls ─────────────────────────────\nconst closeMenuModal=()=>setIsMenuModalOpen(false);const showAddMenuModal=()=>{setCurrentMenuItem({});setMenuImagePreview(null);setMenuImageFile(null);setShowNewCategoryInput(false);setNewCategoryName('');setIsMenuModalOpen(true);};const editMenuItem=item=>{setCurrentMenuItem(item);setMenuImagePreview(item.image_url||null);setMenuImageFile(null);setShowNewCategoryInput(false);setNewCategoryName('');setIsMenuModalOpen(true);};const closeTableModal=()=>setIsTableModalOpen(false);const showAddTableModal=()=>{setCurrentTable({});setIsTableModalOpen(true);};const editTable=t=>{setCurrentTable(t);setIsTableModalOpen(true);};const showQRModal=t=>{setSelectedTableForQR(t);setIsQRModalOpen(true);};const closeQRModal=()=>setIsQRModalOpen(false);const printQR=id=>{const el=document.getElementById(\"qr-modal-\".concat(id))||document.getElementById(\"qr-\".concat(id));if(!(el!==null&&el!==void 0&&el.parentElement))return;const win=window.open('','','width=800,height=600');win.document.write(\"\\n      <html><head><title>QR - Table \".concat(id,\"</title>\\n      <style>body{display:flex;justify-content:center;align-items:center;height:100vh;background:#f9fafb;}\\n      .box{background:white;padding:40px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.1);}</style>\\n      </head><body><div class=\\\"box\\\">\").concat(el.parentElement.innerHTML,\"</div></body></html>\\n    \"));win.document.close();win.focus();setTimeout(()=>{win.print();win.close();},500);};// ── Filters ───────────────────────────────────\nconst filtered=menuItems.filter(i=>{var _i$description;const s=searchTerm.toLowerCase();const nameOk=i.name.toLowerCase().includes(s);const descOk=(_i$description=i.description)===null||_i$description===void 0?void 0:_i$description.toLowerCase().includes(s);const catOk=!selectedCategory||i.category===selectedCategory;return(nameOk||descOk)&&catOk;});const getCategoryColor=c=>{const map={Appetizer:'bg-yellow-100 text-yellow-800','Main Course':'bg-blue-100 text-blue-800',Dessert:'bg-pink-100 text-pink-800',Beverage:'bg-purple-100 text-purple-800',Salad:'bg-green-100 text-green-800'};return map[c]||'bg-gray-100 text-gray-800';};// ── Render ─────────────────────────────────────\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes fade {from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}\\n        .fade{animation:fade .3s ease-out}\\n        .card{transition:all .3s}\\n        .card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,.1)}\\n        .btn{transition:all .2s;cursor:pointer}\\n        .btn:hover{transform:scale(1.05)}\\n        .toast{position:fixed;bottom:20px;right:20px;padding:16px 24px;background:white;border-radius:8px;\\n          box-shadow:0 4px 12px rgba(0,0,0,.15);display:flex;align-items:center;z-index:1000;\\n          transform:translateX(400px);transition:transform .3s}\\n        .toast.show{transform:translateX(0)}\\n        .toast.success{border-left:4px solid #10b981}\\n        .toast.error{border-left:4px solid #ef4444;background:#fef2f2;color:#991b1b}\\n        .loader{border:4px solid #f3f3f3;border-top:4px solid #9333ea;border-radius:50%;width:40px;height:40px;\\n          animation:spin 1s linear infinite;margin:20px auto}\\n        @keyframes spin{to{transform:rotate(360deg)}}\\n        .gradient-bg{background:linear-gradient(135deg,#667eea,#764ba2)}\\n        .cat-badge{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600}\\n      \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"gradient-bg text-white p-6 shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-200 mt-1\",children:\"Manage Menu & Tables\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('menu'),className:\"px-6 py-3 font-semibold \".concat(activeTab==='menu'?'text-purple-600 border-b-2 border-purple-600':'text-gray-600'),children:\"Menu\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('tables'),className:\"px-6 py-3 font-semibold \".concat(activeTab==='tables'?'text-purple-600 border-b-2 border-purple-600':'text-gray-600'),children:\"Tables\"})]}),activeTab==='menu'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Menu Items\"}),/*#__PURE__*/_jsx(\"button\",{onClick:showAddMenuModal,className:\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded font-medium\",children:\"Add Item\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 mb-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"flex-1 px-4 py-2 border rounded\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),className:\"px-4 py-2 border rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Categories\"}),categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]})]}),isMenuLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}):filtered.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 py-12\",children:\"No items found\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:filtered.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden card\",children:[item.image_url&&/*#__PURE__*/_jsx(\"img\",{src:item.image_url,alt:item.name,className:\"w-full h-48 object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:item.description||'No description'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-purple-600\",children:[\"\\u20B9\",item.price_inr]}),/*#__PURE__*/_jsx(\"span\",{className:\"cat-badge \".concat(getCategoryColor(item.category)),children:item.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editMenuItem(item),className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteMenuItem(item.id),className:\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm\",children:\"Delete\"})]})]})]},item.id))})]}),activeTab==='tables'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Tables\"}),/*#__PURE__*/_jsx(\"button\",{onClick:showAddTableModal,className:\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded font-medium\",children:\"Add Table\"})]}),isTablesLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}):tables.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 py-12\",children:\"No tables\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\",children:tables.map(t=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 text-center card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-xl\",children:t.table_name||\"Table \".concat(t.table_number)}),/*#__PURE__*/_jsx(\"div\",{ref:el=>qrRefs.current[t.id]=el,className:\"my-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editTable(t),className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>showQRModal(t),className:\"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded text-sm\",children:\"QR\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTable(t.id),className:\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm\",children:\"Del\"})]})]},t.id))})]})]}),isMenuModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",onClick:closeMenuModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold mb-4\",children:[currentMenuItem.id?'Edit':'Add',\" Item\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleMenuSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"id\",value:currentMenuItem.id||''}),menuImagePreview&&/*#__PURE__*/_jsx(\"img\",{src:menuImagePreview,alt:\"prev\",className:\"w-full h-48 object-cover rounded mb-3\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageChange,className:\"w-full mb-3\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",defaultValue:currentMenuItem.name,placeholder:\"Name\",required:true,className:\"w-full px-4 py-2 border mb-3 rounded\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",defaultValue:currentMenuItem.description,placeholder:\"Description\",className:\"w-full px-4 py-2 border mb-3 rounded\",rows:\"2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"price_inr\",type:\"number\",step:\"0.01\",defaultValue:currentMenuItem.price_inr,placeholder:\"INR\",required:true,className:\"px-4 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{name:\"price_usd\",type:\"number\",step:\"0.01\",defaultValue:currentMenuItem.price_usd,placeholder:\"USD\",required:true,className:\"px-4 py-2 border rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"category\",defaultValue:currentMenuItem.category||'',required:true,className:\"w-full px-4 py-2 border rounded\",onChange:e=>{if(e.target.value==='add-new'){setShowNewCategoryInput(true);e.target.value='';}},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c)),/*#__PURE__*/_jsx(\"option\",{value:\"add-new\",children:\"\\u2795 Add New Category...\"})]}),showNewCategoryInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"New category name\",value:newCategoryName,onChange:e=>setNewCategoryName(e.target.value),className:\"flex-1 px-3 py-2 border rounded\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addNewCategory,className:\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm\",children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowNewCategoryInput(false);setNewCategoryName('');},className:\"bg-gray-400 hover:bg-gray-500 text-white px-3 py-2 rounded text-sm\",children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"is_available\",defaultChecked:currentMenuItem.is_available!==false,className:\"mr-2\"}),\"Available\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded font-medium\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeMenuModal,className:\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\",children:\"Cancel\"})]})]})]})}),isTableModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",onClick:closeTableModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-md w-full p-6\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold mb-4\",children:[currentTable.id?'Edit':'Add',\" Table\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleTableSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"id\",value:currentTable.id||''}),/*#__PURE__*/_jsx(\"input\",{name:\"table_number\",type:\"number\",defaultValue:currentTable.table_number,placeholder:\"Number\",required:true,className:\"w-full px-4 py-2 border mb-3 rounded\"}),/*#__PURE__*/_jsx(\"input\",{name:\"table_name\",defaultValue:currentTable.table_name,placeholder:\"Name (optional)\",className:\"w-full px-4 py-2 border mb-3 rounded\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded font-medium\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeTableModal,className:\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\",children:\"Cancel\"})]})]})]})}),isQRModalOpen&&selectedTableForQR&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",onClick:closeQRModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-md w-full p-6 text-center\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold mb-4\",children:[\"QR \\u2013 Table \",selectedTableForQR.table_number]}),/*#__PURE__*/_jsx(\"div\",{id:\"qr-modal-\".concat(selectedTableForQR.id),ref:el=>qrRefs.current[selectedTableForQR.id]=el}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>printQR(selectedTableForQR.id),className:\"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded\",children:\"Print\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeQRModal,className:\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\",children:\"Close\"})]})]})}),confirmModal.show&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-sm w-full\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg mb-6\",children:confirmModal.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{confirmModal.onConfirm();setConfirmModal({show:false});},className:\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded\",children:\"Yes, Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirmModal({show:false}),className:\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\",children:\"Cancel\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"toast \".concat(toast.show?'show':'',\" \").concat(toast.type),children:toast.message})]})]});}export default AdminPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminPage","activeTab","setActiveTab","menuItems","setMenuItems","tables","setTables","categories","setCategories","isMenuModalOpen","setIsMenuModalOpen","isTableModalOpen","setIsTableModalOpen","isQRModalOpen","setIsQRModalOpen","selectedTableForQR","setSelectedTableForQR","confirmModal","setConfirmModal","show","message","onConfirm","showNewCategoryInput","setShowNewCategoryInput","newCategoryName","setNewCategoryName","currentMenuItem","setCurrentMenuItem","currentTable","setCurrentTable","menuImagePreview","setMenuImagePreview","menuImageFile","setMenuImageFile","isMenuLoading","setIsMenuLoading","isTablesLoading","setIsTablesLoading","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","toast","setToast","type","qrRefs","BASE_URL","window","location","origin","API_URL","showToast","msg","arguments","length","undefined","setTimeout","openConfirm","onYes","loadMenu","res","fetch","concat","json","success","data","err","loadTables","_unused","loadCategories","Array","isArray","filter","c","trim","_unused2","script","document","createElement","src","async","body","appendChild","contains","removeChild","QRCode","forEach","table","el","current","id","hasChildNodes","text","table_number","width","height","addNewCategory","name","includes","method","headers","JSON","stringify","prev","_unused3","handleImageChange","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleMenuSubmit","preventDefault","f","FormData","get","category","image_url","promise","Promise","r","payload","description","price_inr","parseFloat","price_usd","is_available","url","closeMenuModal","_unused4","handleTableSubmit","num","parseInt","table_name","closeTableModal","showQRModal","_objectSpread","_unused5","deleteMenuItem","item","console","error","deleteTable","_unused6","showAddMenuModal","editMenuItem","showAddTableModal","editTable","t","closeQRModal","printQR","getElementById","parentElement","win","open","write","innerHTML","close","focus","print","filtered","i","_i$description","s","toLowerCase","nameOk","descOk","catOk","getCategoryColor","map","Appetizer","Dessert","Beverage","Salad","children","className","onClick","placeholder","value","onChange","alt","ref","stopPropagation","onSubmit","accept","defaultValue","required","rows","step","autoFocus","defaultChecked"],"sources":["/home/user/endofhunger/src/pages/AdminPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\n\nfunction AdminPage() {\n  // ── State ───────────────────────────────────────\n  const [activeTab, setActiveTab] = useState('menu');\n  const [menuItems, setMenuItems] = useState([]);\n  const [tables, setTables] = useState([]);\n  const [categories, setCategories] = useState([]);\n\n  // Modals\n  const [isMenuModalOpen, setIsMenuModalOpen] = useState(false);\n  const [isTableModalOpen, setIsTableModalOpen] = useState(false);\n  const [isQRModalOpen, setIsQRModalOpen] = useState(false);\n  const [selectedTableForQR, setSelectedTableForQR] = useState(null);\n  const [confirmModal, setConfirmModal] = useState({\n    show: false,\n    message: '',\n    onConfirm: () => {},\n  });\n\n  // Add New Category Inline\n  const [showNewCategoryInput, setShowNewCategoryInput] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState('');\n\n  // Form data\n  const [currentMenuItem, setCurrentMenuItem] = useState({});\n  const [currentTable, setCurrentTable] = useState({});\n  const [menuImagePreview, setMenuImagePreview] = useState(null);\n  const [menuImageFile, setMenuImageFile] = useState(null);\n\n  // Loading & Filters\n  const [isMenuLoading, setIsMenuLoading] = useState(false);\n  const [isTablesLoading, setIsTablesLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n\n  // Toast\n  const [toast, setToast] = useState({ show: false, message: '', type: 'success' });\n\n  // Refs\n  const qrRefs = useRef({});\n  const BASE_URL = window.location.origin;\n  const API_URL = 'http://localhost:5000';\n\n  // ── Helpers ─────────────────────────────────────\n  const showToast = useCallback((msg, type = 'success') => {\n    setToast({ show: true, message: msg, type });\n    setTimeout(() => setToast({ show: false, message: '', type: 'success' }), 3000);\n  }, []);\n\n  const openConfirm = (message, onYes) => {\n    setConfirmModal({ show: true, message, onConfirm: onYes });\n  };\n\n  // ── API Calls ───────────────────────────────────\n  const loadMenu = useCallback(async () => {\n    setIsMenuLoading(true);\n    try {\n      const res = await fetch(`${API_URL}/api/menu`);\n      const json = await res.json();\n      if (json.success) setMenuItems(json.data || []);\n    } catch (err) {\n      showToast('Failed to load menu', 'error');\n    } finally {\n      setIsMenuLoading(false);\n    }\n  }, [showToast, API_URL]);\n\n  const loadTables = useCallback(async () => {\n    setIsTablesLoading(true);\n    try {\n      const res = await fetch(`${API_URL}/api/tables`);\n      const json = await res.json();\n      if (json.success) setTables(json.data || []);\n    } catch {\n      showToast('Failed to load tables', 'error');\n    } finally {\n      setIsTablesLoading(false);\n    }\n  }, [showToast, API_URL]);\n\n  const loadCategories = useCallback(async () => {\n    try {\n      const res = await fetch(`${API_URL}/api/categories`);\n      const json = await res.json();\n      if (json.success && Array.isArray(json.data)) {\n        setCategories(json.data.filter(c => c && c.trim() !== ''));\n      }\n    } catch {\n      setCategories(['Appetizer', 'Main Course', 'Dessert', 'Beverage', 'Salad']);\n    }\n  }, [API_URL]);\n\n  // ── Load data ───────────────────────────────────\n  useEffect(() => {\n    loadMenu();\n    loadTables();\n    loadCategories();\n  }, [loadMenu, loadTables, loadCategories]);\n\n  // ── Load QRCode lib ─────────────────────────────\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = 'https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js';\n    script.async = true;\n    document.body.appendChild(script);\n    return () => {\n      if (document.body.contains(script)) document.body.removeChild(script);\n    };\n  }, []);\n\n  // ── Generate QR codes ───────────────────────────\n  useEffect(() => {\n    if (typeof window.QRCode === 'undefined' || tables.length === 0) return;\n    tables.forEach((table) => {\n      const el = qrRefs.current[table.id];\n      if (el && !el.hasChildNodes()) {\n        new window.QRCode(el, {\n          text: `${BASE_URL}/customer.html?table=${table.table_number}`,\n          width: 200,\n          height: 200,\n        });\n      }\n    });\n  }, [tables, BASE_URL]); // Added BASE_URL to dependency array\n\n  // ── Add New Category ────────────────────────────\n  const addNewCategory = async () => {\n    const name = newCategoryName.trim();\n    if (!name || categories.includes(name)) {\n      showToast(name ? 'Category already exists' : 'Enter a name', 'error');\n      return;\n    }\n\n    try {\n      const res = await fetch(`${API_URL}/api/categories`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name }),\n      });\n      const json = await res.json();\n      if (json.success) {\n        setCategories(prev => [...prev, name]);\n        setNewCategoryName('');\n        setShowNewCategoryInput(false);\n        showToast(`Category \"${name}\" added!`, 'success');\n      } else {\n        showToast(json.message || 'Failed to add category', 'error');\n      }\n    } catch {\n      showToast('Network error', 'error');\n    }\n  };\n\n  // ── Handlers ───────────────────────────────────\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setMenuImageFile(file);\n    const reader = new FileReader();\n    reader.onloadend = () => setMenuImagePreview(reader.result);\n    reader.readAsDataURL(file);\n  };\n\n  // ── Submit Handlers ─────────────────────────────\n  const handleMenuSubmit = async (e) => {\n    e.preventDefault();\n    const f = new FormData(e.target);\n    const id = f.get('id');\n    const category = f.get('category');\n\n    let image_url = currentMenuItem.image_url || null;\n    if (menuImageFile) {\n      const promise = () => new Promise((res) => {\n        const r = new FileReader();\n        r.onloadend = () => res(r.result);\n        r.readAsDataURL(menuImageFile);\n      });\n      image_url = await promise();\n    }\n\n    const payload = {\n      name: f.get('name'),\n      description: f.get('description'),\n      price_inr: parseFloat(f.get('price_inr')),\n      price_usd: parseFloat(f.get('price_usd')),\n      category,\n      is_available: f.get('is_available') === 'on',\n      image_url,\n    };\n\n    try {\n      const url = id ? `${API_URL}/api/menu/${id}` : `${API_URL}/api/menu`;\n      const res = await fetch(url, {\n        method: id ? 'PUT' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      const json = await res.json();\n      if (json.success) {\n        closeMenuModal();\n        loadMenu();\n        loadCategories(); // Refresh categories in case new one was used\n        showToast(id ? 'Item updated!' : 'Item added!', 'success');\n      } else {\n        showToast(json.message || 'Failed to save', 'error');\n      }\n    } catch {\n      showToast('Save failed', 'error');\n    }\n  };\n\n  const handleTableSubmit = async (e) => {\n    e.preventDefault();\n    const f = new FormData(e.target);\n    const id = f.get('id');\n    const num = parseInt(f.get('table_number'), 10);\n\n    const payload = {\n      table_number: num,\n      table_name: f.get('table_name') || null,\n    };\n\n    try {\n      const url = id ? `${API_URL}/api/tables/${id}` : `${API_URL}/api/tables`;\n      const res = await fetch(url, {\n        method: id ? 'PUT' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      const json = await res.json();\n      if (json.success) {\n        closeTableModal();\n        loadTables();\n        showToast(id ? 'Table updated' : 'Table added', 'success');\n        if (!id) setTimeout(() => showQRModal({ ...payload, id: json.data.id, table_number: num }), 300);\n      } else showToast(json.message || 'Failed', 'error');\n    } catch {\n      showToast('Save error', 'error');\n    }\n  };\n\n  // ── DELETE MENU ITEM (NOW REALLY WORKS) ─────────\n  const deleteMenuItem = (id) => {\n    openConfirm('Delete this menu item permanently?', async () => {\n      try {\n        const res = await fetch(`${API_URL}/api/menu/${id}`, { \n          method: 'DELETE' \n        });\n        const json = await res.json();\n        \n        if (json.success) {\n          setMenuItems(prev => prev.filter(item => item.id !== id));\n          showToast('Item deleted successfully!', 'success');\n          loadCategories(); // Refresh in case category becomes empty\n        } else {\n          showToast(json.message || 'Cannot delete (used in orders)', 'error');\n        }\n      } catch (err) {\n        console.error(err);\n        showToast('Delete failed', 'error');\n      }\n      setConfirmModal({ show: false });\n    });\n  };\n\n  const deleteTable = (id) => {\n    openConfirm('Delete this table & QR code?', async () => {\n      try {\n        const res = await fetch(`${API_URL}/api/tables/${id}`, { method: 'DELETE' });\n        const json = await res.json();\n        if (json.success) {\n          loadTables();\n          showToast('Table deleted', 'success');\n        }\n      } catch {\n        showToast('Error', 'error');\n      }\n    });\n  };\n\n  // ── Modal Controls ─────────────────────────────\n  const closeMenuModal = () => setIsMenuModalOpen(false);\n  const showAddMenuModal = () => {\n    setCurrentMenuItem({});\n    setMenuImagePreview(null);\n    setMenuImageFile(null);\n    setShowNewCategoryInput(false);\n    setNewCategoryName('');\n    setIsMenuModalOpen(true);\n  };\n\n  const editMenuItem = (item) => {\n    setCurrentMenuItem(item);\n    setMenuImagePreview(item.image_url || null);\n    setMenuImageFile(null);\n    setShowNewCategoryInput(false);\n    setNewCategoryName('');\n    setIsMenuModalOpen(true);\n  };\n\n  const closeTableModal = () => setIsTableModalOpen(false);\n  const showAddTableModal = () => { setCurrentTable({}); setIsTableModalOpen(true); };\n  const editTable = (t) => { setCurrentTable(t); setIsTableModalOpen(true); };\n  const showQRModal = (t) => { setSelectedTableForQR(t); setIsQRModalOpen(true); };\n  const closeQRModal = () => setIsQRModalOpen(false);\n\n  const printQR = (id) => {\n    const el = document.getElementById(`qr-modal-${id}`) || document.getElementById(`qr-${id}`);\n    if (!el?.parentElement) return;\n    const win = window.open('', '', 'width=800,height=600');\n    win.document.write(`\n      <html><head><title>QR - Table ${id}</title>\n      <style>body{display:flex;justify-content:center;align-items:center;height:100vh;background:#f9fafb;}\n      .box{background:white;padding:40px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.1);}</style>\n      </head><body><div class=\"box\">${el.parentElement.innerHTML}</div></body></html>\n    `);\n    win.document.close();\n    win.focus();\n    setTimeout(() => { win.print(); win.close(); }, 500);\n  };\n\n  // ── Filters ───────────────────────────────────\n  const filtered = menuItems.filter((i) => {\n    const s = searchTerm.toLowerCase();\n    const nameOk = i.name.toLowerCase().includes(s);\n    const descOk = i.description?.toLowerCase().includes(s);\n    const catOk = !selectedCategory || i.category === selectedCategory;\n    return (nameOk || descOk) && catOk;\n  });\n\n  const getCategoryColor = (c) => {\n    const map = {\n      Appetizer: 'bg-yellow-100 text-yellow-800',\n      'Main Course': 'bg-blue-100 text-blue-800',\n      Dessert: 'bg-pink-100 text-pink-800',\n      Beverage: 'bg-purple-100 text-purple-800',\n      Salad: 'bg-green-100 text-green-800',\n    };\n    return map[c] || 'bg-gray-100 text-gray-800';\n  };\n\n  // ── Render ─────────────────────────────────────\n  return (\n    <>\n      <style>{`\n        @keyframes fade {from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}\n        .fade{animation:fade .3s ease-out}\n        .card{transition:all .3s}\n        .card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,.1)}\n        .btn{transition:all .2s;cursor:pointer}\n        .btn:hover{transform:scale(1.05)}\n        .toast{position:fixed;bottom:20px;right:20px;padding:16px 24px;background:white;border-radius:8px;\n          box-shadow:0 4px 12px rgba(0,0,0,.15);display:flex;align-items:center;z-index:1000;\n          transform:translateX(400px);transition:transform .3s}\n        .toast.show{transform:translateX(0)}\n        .toast.success{border-left:4px solid #10b981}\n        .toast.error{border-left:4px solid #ef4444;background:#fef2f2;color:#991b1b}\n        .loader{border:4px solid #f3f3f3;border-top:4px solid #9333ea;border-radius:50%;width:40px;height:40px;\n          animation:spin 1s linear infinite;margin:20px auto}\n        @keyframes spin{to{transform:rotate(360deg)}}\n        .gradient-bg{background:linear-gradient(135deg,#667eea,#764ba2)}\n        .cat-badge{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600}\n      `}</style>\n\n      <div className=\"min-h-screen bg-gray-50\">\n        <header className=\"gradient-bg text-white p-6 shadow-lg\">\n          <div className=\"container mx-auto\">\n            <h1 className=\"text-3xl font-bold\">Admin Panel</h1>\n            <p className=\"text-purple-200 mt-1\">Manage Menu & Tables</p>\n          </div>\n        </header>\n\n        <div className=\"container mx-auto px-4 mt-6\">\n          <div className=\"flex border-b\">\n            <button onClick={() => setActiveTab('menu')} className={`px-6 py-3 font-semibold ${activeTab === 'menu' ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600'}`}>\n              Menu\n            </button>\n            <button onClick={() => setActiveTab('tables')} className={`px-6 py-3 font-semibold ${activeTab === 'tables' ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600'}`}>\n              Tables\n            </button>\n          </div>\n\n          {/* MENU TAB */}\n          {activeTab === 'menu' && (\n            <div className=\"mt-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold\">Menu Items</h2>\n                <button onClick={showAddMenuModal} className=\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded font-medium\">\n                  Add Item\n                </button>\n              </div>\n\n              <div className=\"flex gap-4 mb-6\">\n                <input type=\"text\" placeholder=\"Search...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className=\"flex-1 px-4 py-2 border rounded\" />\n                <select value={selectedCategory} onChange={(e) => setSelectedCategory(e.target.value)} className=\"px-4 py-2 border rounded\">\n                  <option value=\"\">All Categories</option>\n                  {categories.map((c) => (\n                    <option key={c} value={c}>{c}</option>\n                  ))}\n                </select>\n              </div>\n\n              {isMenuLoading ? (\n                <div className=\"loader\"></div>\n              ) : filtered.length === 0 ? (\n                <p className=\"text-center text-gray-500 py-12\">No items found</p>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  {filtered.map((item) => (\n                    <div key={item.id} className=\"bg-white rounded-lg shadow overflow-hidden card\">\n                      {item.image_url && <img src={item.image_url} alt={item.name} className=\"w-full h-48 object-cover\" />}\n                      <div className=\"p-5\">\n                        <h3 className=\"font-bold text-lg\">{item.name}</h3>\n                        <p className=\"text-sm text-gray-600 mt-1\">{item.description || 'No description'}</p>\n                        <div className=\"flex justify-between items-center mt-3\">\n                          <span className=\"text-xl font-bold text-purple-600\">₹{item.price_inr}</span>\n                          <span className={`cat-badge ${getCategoryColor(item.category)}`}>{item.category}</span>\n                        </div>\n                        <div className=\"flex gap-2 mt-4\">\n                          <button onClick={() => editMenuItem(item)} className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm\">Edit</button>\n                          <button onClick={() => deleteMenuItem(item.id)} className=\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm\">Delete</button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* TABLES TAB */}\n          {activeTab === 'tables' && (\n            <div className=\"mt-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold\">Tables</h2>\n                <button onClick={showAddTableModal} className=\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded font-medium\">Add Table</button>\n              </div>\n\n              {isTablesLoading ? (\n                <div className=\"loader\"></div>\n              ) : tables.length === 0 ? (\n                <p className=\"text-center text-gray-500 py-12\">No tables</p>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n                  {tables.map((t) => (\n                    <div key={t.id} className=\"bg-white rounded-lg shadow p-6 text-center card\">\n                      <h3 className=\"font-bold text-xl\">{t.table_name || `Table ${t.table_number}`}</h3>\n                      <div ref={(el) => (qrRefs.current[t.id] = el)} className=\"my-4\"></div>\n                      <div className=\"flex gap-2 mt-4\">\n                        <button onClick={() => editTable(t)} className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm\">Edit</button>\n                        <button onClick={() => showQRModal(t)} className=\"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded text-sm\">QR</button>\n                        <button onClick={() => deleteTable(t.id)} className=\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm\">Del</button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* MENU MODAL */}\n        {isMenuModalOpen && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\" onClick={closeMenuModal}>\n            <div className=\"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\n              <h3 className=\"text-xl font-bold mb-4\">{currentMenuItem.id ? 'Edit' : 'Add'} Item</h3>\n              <form onSubmit={handleMenuSubmit}>\n                <input type=\"hidden\" name=\"id\" value={currentMenuItem.id || ''} />\n                {menuImagePreview && <img src={menuImagePreview} alt=\"prev\" className=\"w-full h-48 object-cover rounded mb-3\" />}\n                <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"w-full mb-3\" />\n                <input name=\"name\" defaultValue={currentMenuItem.name} placeholder=\"Name\" required className=\"w-full px-4 py-2 border mb-3 rounded\" />\n                <textarea name=\"description\" defaultValue={currentMenuItem.description} placeholder=\"Description\" className=\"w-full px-4 py-2 border mb-3 rounded\" rows=\"2\" />\n\n                <div className=\"grid grid-cols-2 gap-3 mb-3\">\n                  <input name=\"price_inr\" type=\"number\" step=\"0.01\" defaultValue={currentMenuItem.price_inr} placeholder=\"INR\" required className=\"px-4 py-2 border rounded\" />\n                  <input name=\"price_usd\" type=\"number\" step=\"0.01\" defaultValue={currentMenuItem.price_usd} placeholder=\"USD\" required className=\"px-4 py-2 border rounded\" />\n                </div>\n\n                {/* CATEGORY SELECT WITH ADD NEW */}\n                <div className=\"mb-3\">\n                  <select\n                    name=\"category\"\n                    defaultValue={currentMenuItem.category || ''}\n                    required\n                    className=\"w-full px-4 py-2 border rounded\"\n                    onChange={(e) => {\n                      if (e.target.value === 'add-new') {\n                        setShowNewCategoryInput(true);\n                        e.target.value = '';\n                      }\n                    }}\n                  >\n                    <option value=\"\">Select Category</option>\n                    {categories.map((c) => (\n                      <option key={c} value={c}>{c}</option>\n                    ))}\n                    <option value=\"add-new\">➕ Add New Category...</option>\n                  </select>\n\n                  {showNewCategoryInput && (\n                    <div className=\"flex gap-2 mt-2\">\n                      <input\n                        type=\"text\"\n                        placeholder=\"New category name\"\n                        value={newCategoryName}\n                        onChange={(e) => setNewCategoryName(e.target.value)}\n                        className=\"flex-1 px-3 py-2 border rounded\"\n                        autoFocus\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={addNewCategory}\n                        className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm\"\n                      >\n                        Add\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setShowNewCategoryInput(false);\n                          setNewCategoryName('');\n                        }}\n                        className=\"bg-gray-400 hover:bg-gray-500 text-white px-3 py-2 rounded text-sm\"\n                      >\n                        ✕\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                <label className=\"flex items-center mb-4\">\n                  <input type=\"checkbox\" name=\"is_available\" defaultChecked={currentMenuItem.is_available !== false} className=\"mr-2\" />\n                  Available\n                </label>\n\n                <div className=\"flex gap-3\">\n                  <button type=\"submit\" className=\"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded font-medium\">\n                    Save\n                  </button>\n                  <button type=\"button\" onClick={closeMenuModal} className=\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\">\n                    Cancel\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* OTHER MODALS (Table, QR, Confirm) */}\n        {isTableModalOpen && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\" onClick={closeTableModal}>\n            <div className=\"bg-white rounded-lg max-w-md w-full p-6\" onClick={(e) => e.stopPropagation()}>\n              <h3 className=\"text-xl font-bold mb-4\">{currentTable.id ? 'Edit' : 'Add'} Table</h3>\n              <form onSubmit={handleTableSubmit}>\n                <input type=\"hidden\" name=\"id\" value={currentTable.id || ''} />\n                <input name=\"table_number\" type=\"number\" defaultValue={currentTable.table_number} placeholder=\"Number\" required className=\"w-full px-4 py-2 border mb-3 rounded\" />\n                <input name=\"table_name\" defaultValue={currentTable.table_name} placeholder=\"Name (optional)\" className=\"w-full px-4 py-2 border mb-3 rounded\" />\n                <div className=\"flex gap-3\">\n                  <button type=\"submit\" className=\"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded font-medium\">Save</button>\n                  <button type=\"button\" onClick={closeTableModal} className=\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\">Cancel</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {isQRModalOpen && selectedTableForQR && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\" onClick={closeQRModal}>\n            <div className=\"bg-white rounded-lg max-w-md w-full p-6 text-center\" onClick={(e) => e.stopPropagation()}>\n              <h3 className=\"text-xl font-bold mb-4\">QR – Table {selectedTableForQR.table_number}</h3>\n              <div id={`qr-modal-${selectedTableForQR.id}`} ref={(el) => (qrRefs.current[selectedTableForQR.id] = el)}></div>\n              <div className=\"flex gap-3 mt-6\">\n                <button onClick={() => printQR(selectedTableForQR.id)} className=\"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded\">Print</button>\n                <button onClick={closeQRModal} className=\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\">Close</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Confirm Modal */}\n        {confirmModal.show && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-lg p-6 max-w-sm w-full\">\n              <p className=\"text-lg mb-6\">{confirmModal.message}</p>\n              <div className=\"flex gap-3\">\n                <button onClick={() => { confirmModal.onConfirm(); setConfirmModal({ show: false }); }} className=\"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded\">Yes, Delete</button>\n                <button onClick={() => setConfirmModal({ show: false })} className=\"flex-1 bg-gray-300 hover:bg-gray-400 py-2 rounded\">Cancel</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Toast */}\n        <div className={`toast ${toast.show ? 'show' : ''} ${toast.type}`}>\n          {toast.message}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default AdminPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}