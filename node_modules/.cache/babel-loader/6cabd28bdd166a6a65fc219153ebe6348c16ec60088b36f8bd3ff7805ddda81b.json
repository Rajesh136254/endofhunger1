{"ast":null,"code":"import _objectSpread from\"/home/user/endofhunger/dineflowreact/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/* global Chart */import React,{useState,useLayoutEffect,useRef,useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const formatCurrency=value=>{const num=Number(value);return isNaN(num)?'0.00':num.toFixed(2);};const formatNumber=value=>{const num=Number(value);return isNaN(num)?'0':num.toLocaleString();};function AnalyticsPage(){const[currentCurrency,setCurrentCurrency]=useState('INR');const[timePeriod,setTimePeriod]=useState('daily');const[analyticsData,setAnalyticsData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const revenueChartRef=useRef(null);const ordersChartRef=useRef(null);const categoryChartRef=useRef(null);const paymentChartRef=useRef(null);const hourlyChartRef=useRef(null);const itemsChartRef=useRef(null);const revenueChartInstance=useRef(null);const ordersChartInstance=useRef(null);const categoryChartInstance=useRef(null);const paymentChartInstance=useRef(null);const hourlyChartInstance=useRef(null);const itemsChartInstance=useRef(null);// Fetch analytics data from API\n// Replace the entire fetchAnalyticsData function in AnalyticsPage.js with this version\nconst fetchAnalyticsData=useCallback(async()=>{setLoading(true);setError(null);try{// Fetch all required data\nconst[summaryRes,revenueOrdersRes,topItemsRes,categoryRes,paymentRes,tableRes,hourlyRes]=await Promise.all([fetch(\"/api/analytics/summary?period=\".concat(timePeriod,\"&currency=\").concat(currentCurrency)),fetch(\"/api/analytics/revenue-orders?period=\".concat(timePeriod,\"&currency=\").concat(currentCurrency)),fetch(\"/api/analytics/top-items?period=\".concat(timePeriod,\"&currency=\").concat(currentCurrency)),fetch(\"/api/analytics/category-performance?period=\".concat(timePeriod,\"&currency=\").concat(currentCurrency)),fetch(\"/api/analytics/payment-methods?period=\".concat(timePeriod)),fetch(\"/api/analytics/table-performance?period=\".concat(timePeriod,\"&currency=\").concat(currentCurrency)),fetch(\"/api/analytics/hourly-orders?period=\".concat(timePeriod))]);// Check if responses are OK\nif(!summaryRes.ok){throw new Error(\"Summary API error: \".concat(summaryRes.status));}if(!revenueOrdersRes.ok){throw new Error(\"Revenue/Orders API error: \".concat(revenueOrdersRes.status));}if(!topItemsRes.ok){throw new Error(\"Top Items API error: \".concat(topItemsRes.status));}if(!categoryRes.ok){throw new Error(\"Category API error: \".concat(categoryRes.status));}if(!paymentRes.ok){throw new Error(\"Payment Methods API error: \".concat(paymentRes.status));}if(!tableRes.ok){throw new Error(\"Table Performance API error: \".concat(tableRes.status));}if(!hourlyRes.ok){throw new Error(\"Hourly Orders API error: \".concat(hourlyRes.status));}// Parse JSON responses\nconst summaryResponse=await summaryRes.json();const revenueOrdersResponse=await revenueOrdersRes.json();const topItemsResponse=await topItemsRes.json();const categoriesResponse=await categoryRes.json();const paymentResponse=await paymentRes.json();const tableResponse=await tableRes.json();const hourlyResponse=await hourlyRes.json();// Extract data from the response format\nconst summary=summaryResponse.success?summaryResponse.data:{};const revenueOrders=revenueOrdersResponse.success?revenueOrdersResponse.data:[];const topItems=topItemsResponse.success?topItemsResponse.data:[];const categories=categoriesResponse.success?categoriesResponse.data:[];const paymentMethods=paymentResponse.success?paymentResponse.data:{};const tablePerformance=tableResponse.success?tableResponse.data:[];const hourlyOrders=hourlyResponse.success?hourlyResponse.data:[];setAnalyticsData({summary,daily:revenueOrders,items:topItems,categories,payment_methods:paymentMethods,table_performance:tablePerformance,hourly_orders:hourlyOrders});}catch(err){console.error('Error fetching analytics data:',err);setError(err.message);}finally{setLoading(false);}},[timePeriod,currentCurrency]);// Initialize charts\nconst initializeCharts=useCallback(()=>{if(typeof window.Chart==='undefined')return;const chartOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}}};// Revenue Chart\nif(revenueChartRef.current&&!revenueChartInstance.current){revenueChartInstance.current=new Chart(revenueChartRef.current,{type:'line',data:{labels:[],datasets:[{label:'Revenue',data:[],borderColor:'#f97316',backgroundColor:'rgba(249, 115, 22, 0.1)',tension:0.4,fill:true}]},options:chartOptions});}// Orders Chart\nif(ordersChartRef.current&&!ordersChartInstance.current){ordersChartInstance.current=new Chart(ordersChartRef.current,{type:'bar',data:{labels:[],datasets:[{label:'Orders',data:[],backgroundColor:'#3b82f6'}]},options:chartOptions});}// Category Chart\nif(categoryChartRef.current&&!categoryChartInstance.current){categoryChartInstance.current=new Chart(categoryChartRef.current,{type:'doughnut',data:{labels:[],datasets:[{data:[],backgroundColor:['#f97316','#3b82f6','#10b981','#8b5cf6','#ec4899']}]},options:_objectSpread(_objectSpread({},chartOptions),{},{plugins:{legend:{position:'bottom'}}})});}// Payment Methods Chart\nif(paymentChartRef.current&&!paymentChartInstance.current){paymentChartInstance.current=new Chart(paymentChartRef.current,{type:'doughnut',data:{labels:['Cash','Online'],datasets:[{data:[0,0],backgroundColor:['#10b981','#3b82f6']}]},options:_objectSpread(_objectSpread({},chartOptions),{},{plugins:{legend:{position:'bottom'}}})});}// Hourly Orders Chart\nif(hourlyChartRef.current&&!hourlyChartInstance.current){hourlyChartInstance.current=new Chart(hourlyChartRef.current,{type:'bar',data:{labels:[],datasets:[{label:'Orders',data:[],backgroundColor:'#8b5cf6'}]},options:_objectSpread(_objectSpread({},chartOptions),{},{scales:{x:{title:{display:true,text:'Hour of Day'}},y:{title:{display:true,text:'Number of Orders'}}}})});}// Top Items Chart\nif(itemsChartRef.current&&!itemsChartInstance.current){itemsChartInstance.current=new Chart(itemsChartRef.current,{type:'horizontalBar',data:{labels:[],datasets:[{label:'Quantity Sold',data:[],backgroundColor:'#ec4899'}]},options:_objectSpread(_objectSpread({},chartOptions),{},{indexAxis:'y',scales:{x:{title:{display:true,text:'Quantity Sold'}}}})});}},[]);// Update charts with new data\nconst updateCharts=useCallback(data=>{if(!data||typeof window.Chart==='undefined')return;// Update Revenue and Orders Charts\nif(data.daily){const labels=data.daily.map(d=>d.date);const revenueData=data.daily.map(d=>d[\"revenue_\".concat(currentCurrency.toLowerCase())]);const ordersData=data.daily.map(d=>d.orders);if(revenueChartInstance.current){revenueChartInstance.current.data.labels=labels;revenueChartInstance.current.data.datasets[0].data=revenueData;revenueChartInstance.current.update();}if(ordersChartInstance.current){ordersChartInstance.current.data.labels=labels;ordersChartInstance.current.data.datasets[0].data=ordersData;ordersChartInstance.current.update();}}// Update Category Chart\nif(data.categories&&categoryChartInstance.current){categoryChartInstance.current.data.labels=data.categories.map(c=>c.category);categoryChartInstance.current.data.datasets[0].data=data.categories.map(c=>c.total_orders);categoryChartInstance.current.update();}// Update Payment Methods Chart\nif(data.payment_methods&&paymentChartInstance.current){const labels=Object.keys(data.payment_methods);const values=Object.values(data.payment_methods);paymentChartInstance.current.data.labels=labels;paymentChartInstance.current.data.datasets[0].data=values;paymentChartInstance.current.update();}// Update Hourly Orders Chart\nif(data.hourly_orders&&hourlyChartInstance.current){hourlyChartInstance.current.data.labels=data.hourly_orders.map(h=>h.hour_label);hourlyChartInstance.current.data.datasets[0].data=data.hourly_orders.map(h=>h.orders);hourlyChartInstance.current.update();}// Update Top Items Chart\nif(data.items&&itemsChartInstance.current){itemsChartInstance.current.data.labels=data.items.slice(0,5).map(i=>i.item_name);itemsChartInstance.current.data.datasets[0].data=data.items.slice(0,5).map(i=>i.quantity_sold);itemsChartInstance.current.update();}},[currentCurrency]);// Initialize charts on mount\nuseLayoutEffect(()=>{initializeCharts();fetchAnalyticsData();return()=>{// Clean up chart instances\n[revenueChartInstance,ordersChartInstance,categoryChartInstance,paymentChartInstance,hourlyChartInstance,itemsChartInstance].forEach(chart=>{if(chart.current)chart.current.destroy();});};},[]);// Update charts when data changes\nuseLayoutEffect(()=>{updateCharts(analyticsData);},[analyticsData,currentCurrency,updateCharts]);// Refetch data when time period or currency changes\nuseLayoutEffect(()=>{fetchAnalyticsData();},[timePeriod,currentCurrency,fetchAnalyticsData]);const renderMetricCard=function(title,value,icon){let trend=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card bg-white rounded-xl shadow-lg p-4 sm:p-6 hover-lift\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(icon,\" text-orange-600 text-xl\")})}),trend&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:trend>0?'trend-up':trend<0?'trend-down':'trend-neutral',children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-\".concat(trend>0?'up':trend<0?'down':'right')})}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1 text-gray-600\",children:[Math.abs(trend),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl sm:text-3xl font-bold text-gray-900\",children:value}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:title})]});};const renderTimePeriodButtons=()=>/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-6\",children:['daily','weekly','monthly','yearly'].map(period=>/*#__PURE__*/_jsx(\"button\",{className:\"period-btn px-4 py-2 rounded-lg font-medium transition \".concat(timePeriod===period?'bg-orange-500 text-white active':'bg-gray-200 text-gray-700 hover:bg-gray-300'),onClick:()=>setTimePeriod(period),children:period.charAt(0).toUpperCase()+period.slice(1)},period))});const renderLoadingState=()=>/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500\"})});const renderErrorState=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle mr-2\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Error loading analytics data: \",error]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition\",onClick:fetchAnalyticsData,children:\"Try Again\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"gradient-bg text-white p-4 sm:p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content flex justify-between items-start sm:items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl sm:text-3xl lg:text-4xl font-bold flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chart-line mr-2 sm:mr-3\"}),\"Analytics Dashboard\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-100 text-sm sm:text-base mt-1\",children:\"Real-time Business Insights & Performance Metrics\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4 mt-2 sm:mt-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/20 backdrop-blur-sm rounded-lg p-2\",children:/*#__PURE__*/_jsxs(\"select\",{value:currentCurrency,onChange:e=>setCurrentCurrency(e.target.value),className:\"bg-transparent text-white px-3 py-1 rounded-lg border-none outline-none text-sm sm:text-base\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"INR\",className:\"text-gray-800\",children:\"\\u20B9 INR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",className:\"text-gray-800\",children:\"$ USD\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert('Exported!'),className:\"bg-white/20 backdrop-blur-sm rounded-lg p-2 hover:bg-white/30 transition\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-download text-white\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchAnalyticsData,className:\"bg-white/20 backdrop-blur-sm rounded-lg p-2 hover:bg-white/30 transition\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync-alt text-white\"})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-3 sm:px-4 py-4 sm:py-6\",children:[renderTimePeriodButtons(),loading&&renderLoadingState(),error&&renderErrorState(),!loading&&!error&&analyticsData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid grid gap-4 mb-6\",children:[renderMetricCard('Total Orders',(analyticsData===null||analyticsData===void 0?void 0:analyticsData.summary.total_orders)||0,'fa-shopping-cart'),renderMetricCard('Total Revenue',\"\".concat(currentCurrency==='INR'?'₹':'$').concat(formatCurrency(analyticsData===null||analyticsData===void 0?void 0:analyticsData.summary[\"total_revenue_\".concat(currentCurrency.toLowerCase())])),'fa-dollar-sign'),renderMetricCard('Tables Served',(analyticsData===null||analyticsData===void 0?void 0:analyticsData.summary.tables_served)||0,'fa-chair'),renderMetricCard('Avg Order Value',\"\".concat(currentCurrency==='INR'?'₹':'$').concat(formatCurrency(analyticsData===null||analyticsData===void 0?void 0:analyticsData.summary.avg_order_value)),'fa-receipt')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Revenue Trend\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:revenueChartRef})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Orders Distribution\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:ordersChartRef})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Top Selling Items\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container mb-4\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:itemsChartRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-80 overflow-y-auto custom-scrollbar\",children:analyticsData===null||analyticsData===void 0?void 0:analyticsData.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-gray-500 mr-3\",children:index+1}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900\",children:item.item_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:item.category})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-orange-600\",children:[currentCurrency==='INR'?'₹':'$',formatCurrency(item[\"revenue_\".concat(currentCurrency.toLowerCase())])]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[item.quantity_sold,\" items\"]})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Category Performance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:categoryChartRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 space-y-3\",children:analyticsData===null||analyticsData===void 0?void 0:analyticsData.categories.map((category,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-900\",children:category.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-blue-600\",children:[category.total_orders,\" orders\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[category.total_items,\" items\"]})]})]},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Payment Methods\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:paymentChartRef})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Hourly Order Distribution\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:hourlyChartRef})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Table Performance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"data-table w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Table\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Orders\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Revenue\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Avg Order Value\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:analyticsData===null||analyticsData===void 0?void 0:analyticsData.table_performance.map((table,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:table.table_name}),/*#__PURE__*/_jsx(\"td\",{children:table.total_orders}),/*#__PURE__*/_jsxs(\"td\",{children:[currentCurrency==='INR'?'₹':'$',formatCurrency(table[\"total_revenue_\".concat(currentCurrency.toLowerCase())])]}),/*#__PURE__*/_jsxs(\"td\",{children:[currentCurrency==='INR'?'₹':'$',formatCurrency(table[\"avg_order_value_\".concat(currentCurrency.toLowerCase())])]})]},index))})]})})]})]})]})]});}export default AnalyticsPage;","map":{"version":3,"names":["React","useState","useLayoutEffect","useRef","useCallback","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","formatCurrency","value","num","Number","isNaN","toFixed","formatNumber","toLocaleString","AnalyticsPage","currentCurrency","setCurrentCurrency","timePeriod","setTimePeriod","analyticsData","setAnalyticsData","loading","setLoading","error","setError","revenueChartRef","ordersChartRef","categoryChartRef","paymentChartRef","hourlyChartRef","itemsChartRef","revenueChartInstance","ordersChartInstance","categoryChartInstance","paymentChartInstance","hourlyChartInstance","itemsChartInstance","fetchAnalyticsData","summaryRes","revenueOrdersRes","topItemsRes","categoryRes","paymentRes","tableRes","hourlyRes","Promise","all","fetch","concat","ok","Error","status","summaryResponse","json","revenueOrdersResponse","topItemsResponse","categoriesResponse","paymentResponse","tableResponse","hourlyResponse","summary","success","data","revenueOrders","topItems","categories","paymentMethods","tablePerformance","hourlyOrders","daily","items","payment_methods","table_performance","hourly_orders","err","console","message","initializeCharts","window","Chart","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","current","type","labels","datasets","label","borderColor","backgroundColor","tension","fill","options","_objectSpread","position","scales","x","title","text","y","indexAxis","updateCharts","map","d","date","revenueData","toLowerCase","ordersData","orders","update","c","category","total_orders","Object","keys","values","h","hour_label","slice","i","item_name","quantity_sold","forEach","chart","destroy","renderMetricCard","icon","trend","arguments","length","undefined","className","children","Math","abs","renderTimePeriodButtons","period","onClick","charAt","toUpperCase","renderLoadingState","renderErrorState","onChange","e","target","alert","tables_served","avg_order_value","ref","item","index","total_items","table","table_name"],"sources":["/home/user/endofhunger/dineflowreact/src/pages/AnalyticsPage.js"],"sourcesContent":["/* global Chart */\r\nimport React, { useState, useLayoutEffect, useRef, useCallback } from 'react';\r\nconst formatCurrency = (value) => {\r\n  const num = Number(value);\r\n  return isNaN(num) ? '0.00' : num.toFixed(2);\r\n};\r\n\r\nconst formatNumber = (value) => {\r\n  const num = Number(value);\r\n  return isNaN(num) ? '0' : num.toLocaleString();\r\n};\r\n\r\nfunction AnalyticsPage() {\r\n    const [currentCurrency, setCurrentCurrency] = useState('INR');\r\n    const [timePeriod, setTimePeriod] = useState('daily');\r\n    const [analyticsData, setAnalyticsData] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const revenueChartRef = useRef(null);\r\n    const ordersChartRef = useRef(null);\r\n    const categoryChartRef = useRef(null);\r\n    const paymentChartRef = useRef(null);\r\n    const hourlyChartRef = useRef(null);\r\n    const itemsChartRef = useRef(null);\r\n    \r\n    const revenueChartInstance = useRef(null);\r\n    const ordersChartInstance = useRef(null);\r\n    const categoryChartInstance = useRef(null);\r\n    const paymentChartInstance = useRef(null);\r\n    const hourlyChartInstance = useRef(null);\r\n    const itemsChartInstance = useRef(null);\r\n\r\n    // Fetch analytics data from API\r\n   // Replace the entire fetchAnalyticsData function in AnalyticsPage.js with this version\r\nconst fetchAnalyticsData = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n        // Fetch all required data\r\n        const [summaryRes, revenueOrdersRes, topItemsRes, categoryRes, paymentRes, tableRes, hourlyRes] = await Promise.all([\r\n            fetch(`/api/analytics/summary?period=${timePeriod}&currency=${currentCurrency}`),\r\n            fetch(`/api/analytics/revenue-orders?period=${timePeriod}&currency=${currentCurrency}`),\r\n            fetch(`/api/analytics/top-items?period=${timePeriod}&currency=${currentCurrency}`),\r\n            fetch(`/api/analytics/category-performance?period=${timePeriod}&currency=${currentCurrency}`),\r\n            fetch(`/api/analytics/payment-methods?period=${timePeriod}`),\r\n            fetch(`/api/analytics/table-performance?period=${timePeriod}&currency=${currentCurrency}`),\r\n            fetch(`/api/analytics/hourly-orders?period=${timePeriod}`)\r\n        ]);\r\n\r\n        // Check if responses are OK\r\n        if (!summaryRes.ok) {\r\n            throw new Error(`Summary API error: ${summaryRes.status}`);\r\n        }\r\n        if (!revenueOrdersRes.ok) {\r\n            throw new Error(`Revenue/Orders API error: ${revenueOrdersRes.status}`);\r\n        }\r\n        if (!topItemsRes.ok) {\r\n            throw new Error(`Top Items API error: ${topItemsRes.status}`);\r\n        }\r\n        if (!categoryRes.ok) {\r\n            throw new Error(`Category API error: ${categoryRes.status}`);\r\n        }\r\n        if (!paymentRes.ok) {\r\n            throw new Error(`Payment Methods API error: ${paymentRes.status}`);\r\n        }\r\n        if (!tableRes.ok) {\r\n            throw new Error(`Table Performance API error: ${tableRes.status}`);\r\n        }\r\n        if (!hourlyRes.ok) {\r\n            throw new Error(`Hourly Orders API error: ${hourlyRes.status}`);\r\n        }\r\n\r\n        // Parse JSON responses\r\n        const summaryResponse = await summaryRes.json();\r\n        const revenueOrdersResponse = await revenueOrdersRes.json();\r\n        const topItemsResponse = await topItemsRes.json();\r\n        const categoriesResponse = await categoryRes.json();\r\n        const paymentResponse = await paymentRes.json();\r\n        const tableResponse = await tableRes.json();\r\n        const hourlyResponse = await hourlyRes.json();\r\n\r\n        // Extract data from the response format\r\n        const summary = summaryResponse.success ? summaryResponse.data : {};\r\n        const revenueOrders = revenueOrdersResponse.success ? revenueOrdersResponse.data : [];\r\n        const topItems = topItemsResponse.success ? topItemsResponse.data : [];\r\n        const categories = categoriesResponse.success ? categoriesResponse.data : [];\r\n        const paymentMethods = paymentResponse.success ? paymentResponse.data : {};\r\n        const tablePerformance = tableResponse.success ? tableResponse.data : [];\r\n        const hourlyOrders = hourlyResponse.success ? hourlyResponse.data : [];\r\n\r\n        setAnalyticsData({\r\n            summary,\r\n            daily: revenueOrders,\r\n            items: topItems,\r\n            categories,\r\n            payment_methods: paymentMethods,\r\n            table_performance: tablePerformance,\r\n            hourly_orders: hourlyOrders\r\n        });\r\n    } catch (err) {\r\n        console.error('Error fetching analytics data:', err);\r\n        setError(err.message);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n}, [timePeriod, currentCurrency]);\r\n\r\n    // Initialize charts\r\n    const initializeCharts = useCallback(() => {\r\n        if (typeof window.Chart === 'undefined') return;\r\n\r\n        const chartOptions = { \r\n            responsive: true, \r\n            maintainAspectRatio: false, \r\n            plugins: { \r\n                legend: { display: false } \r\n            } \r\n        };\r\n\r\n        // Revenue Chart\r\n        if (revenueChartRef.current && !revenueChartInstance.current) {\r\n            revenueChartInstance.current = new Chart(revenueChartRef.current, {\r\n                type: 'line',\r\n                data: { \r\n                    labels: [], \r\n                    datasets: [{ \r\n                        label: 'Revenue', \r\n                        data: [], \r\n                        borderColor: '#f97316', \r\n                        backgroundColor: 'rgba(249, 115, 22, 0.1)', \r\n                        tension: 0.4, \r\n                        fill: true \r\n                    }] \r\n                },\r\n                options: chartOptions\r\n            });\r\n        }\r\n\r\n        // Orders Chart\r\n        if (ordersChartRef.current && !ordersChartInstance.current) {\r\n            ordersChartInstance.current = new Chart(ordersChartRef.current, {\r\n                type: 'bar',\r\n                data: { \r\n                    labels: [], \r\n                    datasets: [{ \r\n                        label: 'Orders', \r\n                        data: [], \r\n                        backgroundColor: '#3b82f6' \r\n                    }] \r\n                },\r\n                options: chartOptions\r\n            });\r\n        }\r\n\r\n        // Category Chart\r\n        if (categoryChartRef.current && !categoryChartInstance.current) {\r\n            categoryChartInstance.current = new Chart(categoryChartRef.current, {\r\n                type: 'doughnut',\r\n                data: { \r\n                    labels: [], \r\n                    datasets: [{ \r\n                        data: [], \r\n                        backgroundColor: ['#f97316', '#3b82f6', '#10b981', '#8b5cf6', '#ec4899'] \r\n                    }] \r\n                },\r\n                options: { \r\n                    ...chartOptions, \r\n                    plugins: { \r\n                        legend: { position: 'bottom' } \r\n                    } \r\n                }\r\n            });\r\n        }\r\n\r\n        // Payment Methods Chart\r\n        if (paymentChartRef.current && !paymentChartInstance.current) {\r\n            paymentChartInstance.current = new Chart(paymentChartRef.current, {\r\n                type: 'doughnut',\r\n                data: { \r\n                    labels: ['Cash', 'Online'], \r\n                    datasets: [{ \r\n                        data: [0, 0], \r\n                        backgroundColor: ['#10b981', '#3b82f6'] \r\n                    }] \r\n                },\r\n                options: { \r\n                    ...chartOptions, \r\n                    plugins: { \r\n                        legend: { position: 'bottom' } \r\n                    } \r\n                }\r\n            });\r\n        }\r\n\r\n        // Hourly Orders Chart\r\n        if (hourlyChartRef.current && !hourlyChartInstance.current) {\r\n            hourlyChartInstance.current = new Chart(hourlyChartRef.current, {\r\n                type: 'bar',\r\n                data: {\r\n                    labels: [],\r\n                    datasets: [{\r\n                        label: 'Orders',\r\n                        data: [],\r\n                        backgroundColor: '#8b5cf6'\r\n                    }]\r\n                },\r\n                options: {\r\n                    ...chartOptions,\r\n                    scales: {\r\n                        x: {\r\n                            title: {\r\n                                display: true,\r\n                                text: 'Hour of Day'\r\n                            }\r\n                        },\r\n                        y: {\r\n                            title: {\r\n                                display: true,\r\n                                text: 'Number of Orders'\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Top Items Chart\r\n        if (itemsChartRef.current && !itemsChartInstance.current) {\r\n            itemsChartInstance.current = new Chart(itemsChartRef.current, {\r\n                type: 'horizontalBar',\r\n                data: {\r\n                    labels: [],\r\n                    datasets: [{\r\n                        label: 'Quantity Sold',\r\n                        data: [],\r\n                        backgroundColor: '#ec4899'\r\n                    }]\r\n                },\r\n                options: {\r\n                    ...chartOptions,\r\n                    indexAxis: 'y',\r\n                    scales: {\r\n                        x: {\r\n                            title: {\r\n                                display: true,\r\n                                text: 'Quantity Sold'\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    // Update charts with new data\r\n    const updateCharts = useCallback((data) => {\r\n        if (!data || typeof window.Chart === 'undefined') return;\r\n\r\n        // Update Revenue and Orders Charts\r\n        if (data.daily) {\r\n            const labels = data.daily.map(d => d.date);\r\n            const revenueData = data.daily.map(d => d[`revenue_${currentCurrency.toLowerCase()}`]);\r\n            const ordersData = data.daily.map(d => d.orders);\r\n\r\n            if (revenueChartInstance.current) {\r\n                revenueChartInstance.current.data.labels = labels;\r\n                revenueChartInstance.current.data.datasets[0].data = revenueData;\r\n                revenueChartInstance.current.update();\r\n            }\r\n            if (ordersChartInstance.current) {\r\n                ordersChartInstance.current.data.labels = labels;\r\n                ordersChartInstance.current.data.datasets[0].data = ordersData;\r\n                ordersChartInstance.current.update();\r\n            }\r\n        }\r\n\r\n        // Update Category Chart\r\n        if (data.categories && categoryChartInstance.current) {\r\n            categoryChartInstance.current.data.labels = data.categories.map(c => c.category);\r\n            categoryChartInstance.current.data.datasets[0].data = data.categories.map(c => c.total_orders);\r\n            categoryChartInstance.current.update();\r\n        }\r\n\r\n        // Update Payment Methods Chart\r\n        if (data.payment_methods && paymentChartInstance.current) {\r\n            const labels = Object.keys(data.payment_methods);\r\n            const values = Object.values(data.payment_methods);\r\n            \r\n            paymentChartInstance.current.data.labels = labels;\r\n            paymentChartInstance.current.data.datasets[0].data = values;\r\n            paymentChartInstance.current.update();\r\n        }\r\n\r\n        // Update Hourly Orders Chart\r\n        if (data.hourly_orders && hourlyChartInstance.current) {\r\n            hourlyChartInstance.current.data.labels = data.hourly_orders.map(h => h.hour_label);\r\n            hourlyChartInstance.current.data.datasets[0].data = data.hourly_orders.map(h => h.orders);\r\n            hourlyChartInstance.current.update();\r\n        }\r\n\r\n        // Update Top Items Chart\r\n        if (data.items && itemsChartInstance.current) {\r\n            itemsChartInstance.current.data.labels = data.items.slice(0, 5).map(i => i.item_name);\r\n            itemsChartInstance.current.data.datasets[0].data = data.items.slice(0, 5).map(i => i.quantity_sold);\r\n            itemsChartInstance.current.update();\r\n        }\r\n    }, [currentCurrency]);\r\n\r\n    // Initialize charts on mount\r\n    useLayoutEffect(() => {\r\n        initializeCharts();\r\n        fetchAnalyticsData();\r\n\r\n        return () => {\r\n            // Clean up chart instances\r\n            [\r\n                revenueChartInstance,\r\n                ordersChartInstance,\r\n                categoryChartInstance,\r\n                paymentChartInstance,\r\n                hourlyChartInstance,\r\n                itemsChartInstance\r\n            ].forEach(chart => {\r\n                if (chart.current) chart.current.destroy();\r\n            });\r\n        };\r\n    }, []);\r\n\r\n    // Update charts when data changes\r\n    useLayoutEffect(() => {\r\n        updateCharts(analyticsData);\r\n    }, [analyticsData, currentCurrency, updateCharts]);\r\n\r\n    // Refetch data when time period or currency changes\r\n    useLayoutEffect(() => {\r\n        fetchAnalyticsData();\r\n    }, [timePeriod, currentCurrency, fetchAnalyticsData]);\r\n\r\n    const renderMetricCard = (title, value, icon, trend = null) => (\r\n        <div className=\"stat-card bg-white rounded-xl shadow-lg p-4 sm:p-6 hover-lift\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n                <div className=\"stat-icon w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center\">\r\n                    <i className={`fas ${icon} text-orange-600 text-xl`}></i>\r\n                </div>\r\n                {trend && (\r\n                    <div className=\"flex items-center text-sm\">\r\n                        <span className={trend > 0 ? 'trend-up' : trend < 0 ? 'trend-down' : 'trend-neutral'}>\r\n                            <i className={`fas fa-arrow-${trend > 0 ? 'up' : trend < 0 ? 'down' : 'right'}`}></i>\r\n                        </span>\r\n                        <span className=\"ml-1 text-gray-600\">{Math.abs(trend)}%</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <p className=\"text-2xl sm:text-3xl font-bold text-gray-900\">{value}</p>\r\n            <p className=\"text-sm text-gray-600\">{title}</p>\r\n        </div>\r\n    );\r\n\r\n    const renderTimePeriodButtons = () => (\r\n        <div className=\"flex flex-wrap gap-2 mb-6\">\r\n            {['daily', 'weekly', 'monthly', 'yearly'].map(period => (\r\n                <button\r\n                    key={period}\r\n                    className={`period-btn px-4 py-2 rounded-lg font-medium transition ${\r\n                        timePeriod === period \r\n                            ? 'bg-orange-500 text-white active' \r\n                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                    }`}\r\n                    onClick={() => setTimePeriod(period)}\r\n                >\r\n                    {period.charAt(0).toUpperCase() + period.slice(1)}\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    const renderLoadingState = () => (\r\n        <div className=\"flex justify-center items-center h-64\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500\"></div>\r\n        </div>\r\n    );\r\n\r\n    const renderErrorState = () => (\r\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6\">\r\n            <div className=\"flex items-center\">\r\n                <i className=\"fas fa-exclamation-circle mr-2\"></i>\r\n                <p>Error loading analytics data: {error}</p>\r\n            </div>\r\n            <button \r\n                className=\"mt-2 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition\"\r\n                onClick={fetchAnalyticsData}\r\n            >\r\n                Try Again\r\n            </button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <div className=\"gradient-bg text-white p-4 sm:p-6\">\r\n                <div className=\"container mx-auto\">\r\n                    <div className=\"header-content flex justify-between items-start sm:items-center\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold flex items-center\">\r\n                                <i className=\"fas fa-chart-line mr-2 sm:mr-3\"></i>\r\n                                Analytics Dashboard\r\n                            </h1>\r\n                            <p className=\"text-orange-100 text-sm sm:text-base mt-1\">\r\n                                Real-time Business Insights & Performance Metrics\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 sm:gap-4 mt-2 sm:mt-0\">\r\n                            <div className=\"bg-white/20 backdrop-blur-sm rounded-lg p-2\">\r\n                                <select \r\n                                    value={currentCurrency} \r\n                                    onChange={(e) => setCurrentCurrency(e.target.value)} \r\n                                    className=\"bg-transparent text-white px-3 py-1 rounded-lg border-none outline-none text-sm sm:text-base\"\r\n                                >\r\n                                    <option value=\"INR\" className=\"text-gray-800\">₹ INR</option>\r\n                                    <option value=\"USD\" className=\"text-gray-800\">$ USD</option>\r\n                                </select>\r\n                            </div>\r\n                            <button \r\n                                onClick={() => alert('Exported!')} \r\n                                className=\"bg-white/20 backdrop-blur-sm rounded-lg p-2 hover:bg-white/30 transition\"\r\n                            >\r\n                                <i className=\"fas fa-download text-white\"></i>\r\n                            </button>\r\n                            <button \r\n                                onClick={fetchAnalyticsData} \r\n                                className=\"bg-white/20 backdrop-blur-sm rounded-lg p-2 hover:bg-white/30 transition\"\r\n                            >\r\n                                <i className=\"fas fa-sync-alt text-white\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"container mx-auto px-3 sm:px-4 py-4 sm:py-6\">\r\n                {renderTimePeriodButtons()}\r\n                \r\n                {loading && renderLoadingState()}\r\n                {error && renderErrorState()}\r\n                \r\n                {!loading && !error && analyticsData && (\r\n                    <>\r\n                        <div className=\"stats-grid grid gap-4 mb-6\">\r\n                            {renderMetricCard(\r\n                                'Total Orders', \r\n                                analyticsData?.summary.total_orders || 0, \r\n                                'fa-shopping-cart'\r\n                            )}\r\n                            {renderMetricCard(\r\n                                'Total Revenue', \r\n                                `${currentCurrency === 'INR' ? '₹' : '$'}${formatCurrency(analyticsData?.summary[`total_revenue_${currentCurrency.toLowerCase()}`])}`, \r\n                                'fa-dollar-sign'\r\n                            )}\r\n                            {renderMetricCard(\r\n                                'Tables Served', \r\n                                analyticsData?.summary.tables_served || 0, \r\n                                'fa-chair'\r\n                            )}\r\n                            {renderMetricCard(\r\n                                'Avg Order Value', \r\n                                `${currentCurrency === 'INR' ? '₹' : '$'}${formatCurrency(analyticsData?.summary.avg_order_value)}`, \r\n                                'fa-receipt'\r\n                            )}\r\n                        </div>\r\n                        \r\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n                            <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\">\r\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Revenue Trend</h3>\r\n                                <div className=\"chart-container\">\r\n                                    <canvas ref={revenueChartRef}></canvas>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\">\r\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Orders Distribution</h3>\r\n                                <div className=\"chart-container\">\r\n                                    <canvas ref={ordersChartRef}></canvas>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n                            <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\">\r\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Top Selling Items</h3>\r\n                                <div className=\"chart-container mb-4\">\r\n                                    <canvas ref={itemsChartRef}></canvas>\r\n                                </div>\r\n                                <div className=\"space-y-3 max-h-80 overflow-y-auto custom-scrollbar\">\r\n                                    {analyticsData?.items.map((item, index) => (\r\n                                        <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <span className=\"text-lg font-bold text-gray-500 mr-3\">{index + 1}</span>\r\n                                                <div>\r\n                                                    <p className=\"font-semibold text-gray-900\">{item.item_name}</p>\r\n                                                    <p className=\"text-xs text-gray-500\">{item.category}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"text-right\">\r\n                                                <p className=\"font-bold text-orange-600\">\r\n                                                    {currentCurrency === 'INR' ? '₹' : '$'}\r\n                                                    {formatCurrency(item[`revenue_${currentCurrency.toLowerCase()}`])}\r\n                                                </p>\r\n                                                <p className=\"text-xs text-gray-500\">{item.quantity_sold} items</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\">\r\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Category Performance</h3>\r\n                                <div className=\"chart-container\">\r\n                                    <canvas ref={categoryChartRef}></canvas>\r\n                                </div>\r\n                                <div className=\"mt-4 space-y-3\">\r\n                                    {analyticsData?.categories.map((category, index) => (\r\n                                        <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                                            <p className=\"font-semibold text-gray-900\">{category.category}</p>\r\n                                            <div className=\"text-right\">\r\n                                                <p className=\"font-bold text-blue-600\">{category.total_orders} orders</p>\r\n                                                <p className=\"text-xs text-gray-500\">{category.total_items} items</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n                            <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\">\r\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Payment Methods</h3>\r\n                                <div className=\"chart-container\">\r\n                                    <canvas ref={paymentChartRef}></canvas>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\">\r\n                                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Hourly Order Distribution</h3>\r\n                                <div className=\"chart-container\">\r\n                                    <canvas ref={hourlyChartRef}></canvas>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"bg-white rounded-xl shadow-lg p-4 sm:p-6 fade-in\">\r\n                            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Table Performance</h3>\r\n                            <div className=\"overflow-x-auto\">\r\n                                <table className=\"data-table w-full\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>Table</th>\r\n                                            <th>Orders</th>\r\n                                            <th>Revenue</th>\r\n                                            <th>Avg Order Value</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {analyticsData?.table_performance.map((table, index) => (\r\n                                            <tr key={index}>\r\n                                                <td>{table.table_name}</td>\r\n                                                <td>{table.total_orders}</td>\r\n                                                <td>\r\n                                                    {currentCurrency === 'INR' ? '₹' : '$'}\r\n                                                    {formatCurrency(table[`total_revenue_${currentCurrency.toLowerCase()}`])}\r\n                                                </td>\r\n                                                <td>\r\n                                                    {currentCurrency === 'INR' ? '₹' : '$'}\r\n                                                    {formatCurrency(table[`avg_order_value_${currentCurrency.toLowerCase()}`])}\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AnalyticsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}