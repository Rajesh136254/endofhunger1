{"ast":null,"code":"import React,{useState,useContext}from'react';import{useAuth}from'../contexts/AuthContext';import{Link,useNavigate,useSearchParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=_ref=>{let{redirectUrl}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const{login}=useAuth();const navigate=useNavigate();const[searchParams]=useSearchParams();const tableNumber=searchParams.get('table')||'1';// Use redirectUrl if provided, otherwise use default\nconst redirectTo=redirectUrl||\"/customer.html?table=\".concat(tableNumber);const handleSubmit=async e=>{e.preventDefault();setError('');setIsLoading(true);const result=await login(email,password);if(result.success){navigate(redirectTo);}else{setError(result.message);}setIsLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-utensils text-white text-2xl\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:[\"Or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/signup?table=\".concat(tableNumber),className:\"font-medium text-blue-600 hover:text-blue-500\",children:\"create a new account\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 bg-red-50 border-l-4 border-red-500 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-circle text-red-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700\",children:error})})]})}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",required:true,value:email,onChange:e=>setEmail(e.target.value),className:\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",autoComplete:\"current-password\",required:true,value:password,onChange:e=>setPassword(e.target.value),className:\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",children:[isLoading?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin mr-2\"}):null,\"Sign in\"]})})]})]})})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","useContext","useAuth","Link","useNavigate","useSearchParams","jsx","_jsx","jsxs","_jsxs","LoginPage","_ref","redirectUrl","email","setEmail","password","setPassword","error","setError","isLoading","setIsLoading","login","navigate","searchParams","tableNumber","get","redirectTo","concat","handleSubmit","e","preventDefault","result","success","message","className","children","to","onSubmit","htmlFor","id","name","type","autoComplete","required","value","onChange","target","disabled"],"sources":["/home/user/endofhunger/dineflowreact/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Link, useNavigate, useSearchParams } from 'react-router-dom';\r\n\r\nconst LoginPage = ({ redirectUrl }) => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const { login } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n    const tableNumber = searchParams.get('table') || '1';\r\n\r\n    // Use redirectUrl if provided, otherwise use default\r\n    const redirectTo = redirectUrl || `/customer.html?table=${tableNumber}`;\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setIsLoading(true);\r\n\r\n        const result = await login(email, password);\r\n        \r\n        if (result.success) {\r\n            navigate(redirectTo);\r\n        } else {\r\n            setError(result.message);\r\n        }\r\n        \r\n        setIsLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n                <div className=\"flex justify-center\">\r\n                    <div className=\"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center\">\r\n                        <i className=\"fas fa-utensils text-white text-2xl\"></i>\r\n                    </div>\r\n                </div>\r\n                <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n                    Sign in to your account\r\n                </h2>\r\n                <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n                    Or{' '}\r\n                    <Link to={`/signup?table=${tableNumber}`} className=\"font-medium text-blue-600 hover:text-blue-500\">\r\n                        create a new account\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\r\n                <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\r\n                    {error && (\r\n                        <div className=\"mb-4 bg-red-50 border-l-4 border-red-500 p-4\">\r\n                            <div className=\"flex\">\r\n                                <div className=\"flex-shrink-0\">\r\n                                    <i className=\"fas fa-exclamation-circle text-red-400\"></i>\r\n                                </div>\r\n                                <div className=\"ml-3\">\r\n                                    <p className=\"text-sm text-red-700\">{error}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    \r\n                    <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n                        <div>\r\n                            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                                Email address\r\n                            </label>\r\n                            <div className=\"mt-1\">\r\n                                <input\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    type=\"email\"\r\n                                    autoComplete=\"email\"\r\n                                    required\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                                Password\r\n                            </label>\r\n                            <div className=\"mt-1\">\r\n                                <input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    type=\"password\"\r\n                                    autoComplete=\"current-password\"\r\n                                    required\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isLoading}\r\n                                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\r\n                            >\r\n                                {isLoading ? (\r\n                                    <i className=\"fas fa-spinner fa-spin mr-2\"></i>\r\n                                ) : null}\r\n                                Sign in\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}