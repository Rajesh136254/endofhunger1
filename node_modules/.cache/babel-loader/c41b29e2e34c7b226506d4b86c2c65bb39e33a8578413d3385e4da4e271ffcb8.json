{"ast":null,"code":"import _objectSpread from\"/home/user/endofhunger/dineflowreact/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import{useAuth}from'../contexts/AuthContext';import{useNavigate,useSearchParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CustomerPage(){// State variables\nconst[menuItems,setMenuItems]=useState([]);const[cart,setCart]=useState([]);const[currentCurrency,setCurrentCurrency]=useState('INR');const[searchParams]=useSearchParams();const[tableNumber,setTableNumber]=useState(()=>{return parseInt(searchParams.get('table')||'1');});const[tables,setTables]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[activeCategory,setActiveCategory]=useState('all');const[isCartModalOpen,setIsCartModalOpen]=useState(false);const[isLoading,setIsLoading]=useState(true);const[showOrderSuccess,setShowOrderSuccess]=useState(false);const[orderId,setOrderId]=useState(null);const[showToast,setShowToast]=useState(false);const[isOrdersModalOpen,setIsOrdersModalOpen]=useState(false);const[customerOrders,setCustomerOrders]=useState([]);// Add this line with other state variables\nconst[categories,setCategories]=useState([]);const{currentUser,logout}=useAuth();const navigate=useNavigate();const API_URL='http://localhost:5000';// Backend server URL\n// --- Helper Functions ---\nconst generateFoodImageURL=(itemName,imageUrl)=>{// If we have an image_url from the database, use it\nif(imageUrl){// If it's a relative path, prepend the API URL\nif(imageUrl.startsWith('/uploads/')){return\"\".concat(API_URL).concat(imageUrl);}// If it's already a full URL, use it as is\nreturn imageUrl;}// Fallback to placeholder images if no image_url is available\nconst normalizedName=itemName.toLowerCase().trim();const foodImageMap={'margherita pizza':'https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80','chicken biryani':'https://images.unsplash.com/photo-1589302168068-964a4e1a9eb4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80','paneer tikka':'https://images.unsplash.com/photo-1569957485519-258992c2e8b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80','caesar salad':'https://images.unsplash.com/photo-1550304963-4a56a14c3df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80','masala dosa':'https://images.unsplash.com/photo-1589302168068-964a4e1a9eb4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80','chocolate brownie':'https://images.unsplash.com/photo-1606313564200-e75d5e30476c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'};return foodImageMap[normalizedName]||\"https://picsum.photos/seed/\".concat(normalizedName.replace(/\\s+/g,''),\"/400/300.jpg\");};const handleLogout=()=>{logout();navigate('/login');};const getAuthHeaders=()=>{const token=localStorage.getItem('token');return token?{'Authorization':\"Bearer \".concat(token)}:{};};// --- Data Loading Functions ---\nconst loadTables=useCallback(async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/tables\"),{headers:_objectSpread(_objectSpread({},getAuthHeaders()),{},{'Content-Type':'application/json'})});const data=await response.json();if(data.success){setTables(data.data);}else{console.error('API Error:',data.message);}}catch(error){console.error('Error loading tables:',error);}},[]);const loadCategories=useCallback(async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/categories\"),{headers:_objectSpread(_objectSpread({},getAuthHeaders()),{},{'Content-Type':'application/json'})});const data=await response.json();if(data.success){setCategories(data.data);}else{// Fallback to default categories if API fails\nsetCategories(['Appetizer','Main Course','Dessert','Beverage','Salad']);}}catch(error){console.error('Error loading categories:',error);// Fallback to default categories if API fails\nsetCategories(['Appetizer','Main Course','Dessert','Beverage','Salad']);}},[]);const loadMenu=useCallback(async()=>{setIsLoading(true);try{const response=await fetch(\"\".concat(API_URL,\"/api/menu\"),{headers:_objectSpread(_objectSpread({},getAuthHeaders()),{},{'Content-Type':'application/json'})});if(!response.ok){const errorText=await response.text();console.error('Menu error response:',errorText);throw new Error(\"Server responded with \".concat(response.status,\": \").concat(errorText));}const data=await response.json();if(data.success){setMenuItems(data.data);}else{console.error('API Error:',data.message);}}catch(error){console.error('Error loading menu:',error);}finally{setIsLoading(false);}},[API_URL]);// Add API_URL as dependency\nconst loadCustomerOrders=useCallback(async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/orders?table_number=\").concat(tableNumber),{headers:_objectSpread(_objectSpread({},getAuthHeaders()),{},{'Content-Type':'application/json'})});const data=await response.json();if(data.success){setCustomerOrders(data.data);}else{console.error('API Error:',data.message);}}catch(error){console.error('Error loading customer orders:',error);}},[tableNumber]);// --- Cart Functions ---\nconst addToCart=itemId=>{const item=menuItems.find(i=>i.id===itemId);if(!item)return;setCart(currentCart=>{const existingItem=currentCart.find(i=>i.id===itemId);if(existingItem){return currentCart.map(i=>i.id===itemId?_objectSpread(_objectSpread({},i),{},{quantity:i.quantity+1}):i);}else{return[...currentCart,_objectSpread(_objectSpread({},item),{},{quantity:1})];}});setShowToast(true);setTimeout(()=>setShowToast(false),3000);};const removeFromCart=itemId=>{setCart(currentCart=>currentCart.filter(i=>i.id!==itemId));};const updateQuantity=(itemId,change)=>{setCart(currentCart=>{return currentCart.map(item=>{if(item.id===itemId){const newQuantity=item.quantity+change;return newQuantity>0?_objectSpread(_objectSpread({},item),{},{quantity:newQuantity}):null;}return item;}).filter(Boolean);});};const placeOrder=async()=>{var _document$querySelect;if(cart.length===0)return;const paymentMethod=((_document$querySelect=document.querySelector('input[name=\"payment-method\"]:checked'))===null||_document$querySelect===void 0?void 0:_document$querySelect.value)||'cash';const orderData={table_number:tableNumber,items:cart.map(i=>({id:i.id,quantity:i.quantity,price_inr:i.price_inr,price_usd:i.price_usd,name:i.name})),currency:currentCurrency,payment_method:paymentMethod};try{const response=await fetch(\"\".concat(API_URL,\"/api/orders\"),{method:'POST',headers:_objectSpread(_objectSpread({},getAuthHeaders()),{},{'Content-Type':'application/json'}),body:JSON.stringify(orderData)});const data=await response.json();if(data.success){setOrderId(data.data.id);setShowOrderSuccess(true);setCart([]);setIsCartModalOpen(false);}else{alert('Failed to place order. Please try again.');}}catch(error){console.error('Error placing order:',error);alert('Error placing order. Please try again.');}};// --- Derived State ---\nconst filteredMenu=menuItems.filter(item=>{const matchesCategory=activeCategory==='all'||item.category===activeCategory;const matchesSearch=item.name.toLowerCase().includes(searchTerm)||item.description&&item.description.toLowerCase().includes(searchTerm);return matchesCategory&&matchesSearch;});const cartCount=cart.reduce((sum,item)=>sum+item.quantity,0);const cartTotal=cart.reduce((sum,item)=>{const price=currentCurrency==='INR'?item.price_inr:item.price_usd;return sum+price*item.quantity;},0);// --- useEffect Hooks ---\nuseEffect(()=>{const urlParams=new URLSearchParams(window.location.search);const tableFromUrl=parseInt(urlParams.get('table')||'1');setTableNumber(tableFromUrl);loadTables();loadMenu();loadCategories();},[loadTables,loadMenu,loadCategories]);useEffect(()=>{if(isOrdersModalOpen){loadCustomerOrders();}},[isOrdersModalOpen,loadCustomerOrders]);// --- Render Logic ---\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top-cart\",children:/*#__PURE__*/_jsx(\"div\",{className:\"gradient-bg text-white p-3 sm:p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-full flex items-center justify-center mr-2 sm:mr-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-utensils text-blue-600 text-sm sm:text-base\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg sm:text-2xl font-bold\",children:\"Menu\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-100 text-xs sm:text-sm flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chair mr-1\"}),\" Table #\",/*#__PURE__*/_jsx(\"span\",{children:tableNumber})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 sm:gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/20 backdrop-blur-sm rounded-lg p-1 sm:p-2\",children:/*#__PURE__*/_jsxs(\"select\",{value:currentCurrency,onChange:e=>setCurrentCurrency(e.target.value),className:\"bg-transparent text-white px-2 sm:px-3 py-1 sm:py-2 rounded-lg border-none outline-none text-xs sm:text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"INR\",className:\"text-gray-800\",children:\"\\u20B9 INR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",className:\"text-gray-800\",children:\"$ USD\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOrdersModalOpen(true),className:\"bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clipboard-list text-white\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsCartModalOpen(true),className:\"bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition relative\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart text-white\"}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center cart-badge\",children:cartCount})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-out-alt text-white\"})})]})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-3 sm:px-4 py-4 sm:py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 sm:mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Search for dishes, ingredients...\",className:\"w-full pl-10 pr-4 py-2 sm:py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm text-sm sm:text-base input-focus\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mb-4\",children:/*#__PURE__*/_jsx(\"select\",{value:tableNumber,onChange:e=>setTableNumber(parseInt(e.target.value)),className:\"flex-1 px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 text-sm input-focus\",children:tables.map(table=>/*#__PURE__*/_jsx(\"option\",{value:table.table_number,children:table.table_name},table.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 sm:mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 overflow-x-auto pb-2 px-1 -mx-1 scrollbar-hide\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveCategory('all'),className:\"category-pill px-3 sm:px-4 py-1.5 sm:py-2 rounded-full font-medium whitespace-nowrap flex items-center text-xs sm:text-sm flex-shrink-0 \".concat(activeCategory==='all'?'active text-white':'bg-gray-200 text-gray-700'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-border-all mr-1 sm:mr-2\"}),\"All\"]}),categories.map(cat=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveCategory(cat),className:\"category-pill px-3 sm:px-4 py-1.5 sm:py-2 rounded-full font-medium whitespace-nowrap flex items-center text-xs sm:text-sm flex-shrink-0 \".concat(activeCategory===cat?'active text-white':'bg-gray-200 text-gray-700'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-utensils mr-1 sm:mr-2\"}),cat]},cat))]})})]}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"menu-grid grid gap-4 sm:gap-6\",children:Array(6).fill().map((_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-md overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-48 shimmer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-3/4 mb-2 shimmer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-gray-200 rounded w-full mb-1 shimmer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-gray-200 rounded w-5/6 mb-3 shimmer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-200 rounded w-20 shimmer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-10 bg-gray-200 rounded-lg w-28 shimmer\"})]})]})]},i))}):/*#__PURE__*/_jsx(\"div\",{className:\"menu-grid grid gap-4 sm:gap-6\",children:filteredMenu.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-full bg-gray-50 rounded-xl p-8 text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search text-gray-400 text-4xl mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-700 mb-2\",children:\"No items found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Try adjusting your search or filter criteria\"})]}):filteredMenu.map(item=>{const price=currentCurrency==='INR'?item.price_inr:item.price_usd;const symbol=currentCurrency==='INR'?'₹':'$';return/*#__PURE__*/_jsxs(\"div\",{className:\"menu-card bg-white rounded-xl shadow-md overflow-hidden card-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-40 sm:h-48 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"img\",{src:generateFoodImageURL(item.name,item.image_url),alt:item.name,className:\"w-full h-full object-cover food-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 right-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full text-xs font-medium text-gray-700\",children:item.category})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 sm:p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base sm:text-lg font-semibold text-gray-900 mb-1\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs sm:text-sm text-gray-600 mb-3 line-clamp-2\",children:item.description||'Delicious dish prepared with fresh ingredients'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-tag text-white px-2 sm:px-3 py-1 rounded-full font-bold text-xs sm:text-sm\",children:[symbol,parseFloat(price).toFixed(2)]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>addToCart(item.id),className:\"btn-add bg-blue-600 hover:bg-blue-700 text-white font-medium py-1.5 sm:py-2 px-3 sm:px-4 rounded-lg transition duration-200 flex items-center text-xs sm:text-sm\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-1\"}),\" Add\"]})]})]})]},item.id);})})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsCartModalOpen(true),className:\"floating-cart bg-blue-600 hover:bg-blue-700 text-white btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart text-xl\"}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center cart-badge\",children:cartCount})]}),isCartModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 modal-backdrop z-50 flex items-end sm:items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white w-full sm:max-w-lg sm:rounded-2xl rounded-t-2xl modal-content shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 bg-white border-b border-gray-200 p-4 flex justify-between items-center z-10\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart mr-2 text-blue-600\"}),\"Your Cart\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsCartModalOpen(false),className:\"text-gray-500 hover:text-gray-700 text-2xl transition\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 space-y-3 max-h-96 overflow-y-auto\",children:cart.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"Your cart is empty\"}):cart.map(item=>{const price=currentCurrency==='INR'?item.price_inr:item.price_usd;const symbol=currentCurrency==='INR'?'₹':'$';return/*#__PURE__*/_jsx(\"div\",{className:\"cart-item bg-gray-50 rounded-lg p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:generateFoodImageURL(item.name,item.image_url),alt:item.name,className:\"w-16 h-16 rounded-lg object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[symbol,parseFloat(price).toFixed(2),\" each\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.id),className:\"text-red-500 hover:text-red-700 transition\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.id,-1),className:\"quantity-btn w-8 h-8 rounded-full bg-gray-300 hover:bg-gray-400 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus text-xs\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold w-8 text-center\",children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.id,1),className:\"quantity-btn w-8 h-8 rounded-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus text-xs\"})})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-blue-600\",children:[symbol,(price*item.quantity).toFixed(2)]})]})]})]})},item.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 p-4 sticky bottom-0 bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2 flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-credit-card mr-2\"}),\"Payment Method\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"payment-option border-2 border-gray-200 rounded-lg p-3 cursor-pointer hover:border-blue-500 transition\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"payment-method\",value:\"cash\",className:\"sr-only\",defaultChecked:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-money-bill-wave text-2xl text-green-600 mb-1\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Pay at table\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"payment-option border-2 border-gray-200 rounded-lg p-3 cursor-pointer hover:border-blue-500 transition\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"payment-method\",value:\"online\",className:\"sr-only\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-mobile-alt text-2xl text-blue-600 mb-1\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:\"Online\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Digital payment\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-blue-600\",children:[currentCurrency==='INR'?'₹':'$',cartTotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:placeOrder,className:\"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition duration-200 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle mr-2\"}),\"Place Order\"]})]})]})}),isOrdersModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 modal-backdrop z-50 flex items-end sm:items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white w-full sm:max-w-lg sm:rounded-2xl rounded-t-2xl modal-content shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 bg-white border-b border-gray-200 p-4 flex justify-between items-center z-10\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold flex items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clipboard-list mr-2 text-blue-600\"}),\"Your Orders\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setIsOrdersModalOpen(false);setCustomerOrders([]);},className:\"text-gray-500 hover:text-gray-700 text-2xl transition\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 space-y-3 max-h-96 overflow-y-auto\",children:customerOrders.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"No orders placed yet\"}):customerOrders.map(order=>{const statusMap={pending:1,preparing:2,ready:3,delivered:4};const currentStep=statusMap[order.order_status]||0;const createdTime=new Date(order.created_at).toLocaleString();const updatedTime=order.updated_at?new Date(order.updated_at).toLocaleString():'N/A';const symbol=order.currency==='INR'?'₹':'$';const amount=order[\"total_amount_\".concat(order.currency.toLowerCase())];return/*#__PURE__*/_jsxs(\"div\",{className:\"order-item bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold mb-2\",children:[\"Order #\",order.id,\" - \",createdTime]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:order.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[item.quantity,\"x \",item.item_name]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Total: \",symbol,parseFloat(amount).toFixed(2)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Payment: \",order.payment_method]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline flex justify-between items-center relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/2 left-0 w-full h-1 bg-gray-300 -translate-y-1/2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/2 left-0 w-full h-1 bg-blue-600 -translate-y-1/2\",style:{width:\"\".concat(currentStep/4*100,\"%\")}}),/*#__PURE__*/_jsx(\"div\",{className:\"step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs \".concat(currentStep>=1?'bg-blue-600 text-white':'bg-gray-300 text-gray-600'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clock\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs \".concat(currentStep>=2?'bg-blue-600 text-white':'bg-gray-300 text-gray-600'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-fire\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs \".concat(currentStep>=3?'bg-blue-600 text-white':'bg-gray-300 text-gray-600'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs \".concat(currentStep>=4?'bg-blue-600 text-white':'bg-gray-300 text-gray-600'),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-truck\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Ordered\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Preparing\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Ready\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Delivered\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-center mt-2\",children:[\"Current Status: \",order.order_status.toUpperCase(),\" at \",updatedTime]})]},order.id);})})]})}),showOrderSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 modal-backdrop z-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl p-8 max-w-sm mx-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check text-green-600 text-2xl\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-2\",children:\"Order Placed Successfully!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-4\",children:[\"Order ID: #\",orderId]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-6\",children:\"Your order will be prepared shortly\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowOrderSuccess(false),className:\"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition\",children:\"OK\"})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"toast\",className:\"toast \".concat(showToast?'show':''),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle\"}),/*#__PURE__*/_jsx(\"span\",{id:\"toast-message\",children:\"Item added to cart!\"})]})]});}export default CustomerPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useAuth","useNavigate","useSearchParams","jsx","_jsx","jsxs","_jsxs","CustomerPage","menuItems","setMenuItems","cart","setCart","currentCurrency","setCurrentCurrency","searchParams","tableNumber","setTableNumber","parseInt","get","tables","setTables","searchTerm","setSearchTerm","activeCategory","setActiveCategory","isCartModalOpen","setIsCartModalOpen","isLoading","setIsLoading","showOrderSuccess","setShowOrderSuccess","orderId","setOrderId","showToast","setShowToast","isOrdersModalOpen","setIsOrdersModalOpen","customerOrders","setCustomerOrders","categories","setCategories","currentUser","logout","navigate","API_URL","generateFoodImageURL","itemName","imageUrl","startsWith","concat","normalizedName","toLowerCase","trim","foodImageMap","replace","handleLogout","getAuthHeaders","token","localStorage","getItem","loadTables","response","fetch","headers","_objectSpread","data","json","success","console","error","message","loadCategories","loadMenu","ok","errorText","text","Error","status","loadCustomerOrders","addToCart","itemId","item","find","i","id","currentCart","existingItem","map","quantity","setTimeout","removeFromCart","filter","updateQuantity","change","newQuantity","Boolean","placeOrder","_document$querySelect","length","paymentMethod","document","querySelector","value","orderData","table_number","items","price_inr","price_usd","name","currency","payment_method","method","body","JSON","stringify","alert","filteredMenu","matchesCategory","category","matchesSearch","includes","description","cartCount","reduce","sum","cartTotal","price","urlParams","URLSearchParams","window","location","search","tableFromUrl","className","children","onChange","e","target","onClick","type","placeholder","table","table_name","cat","Array","fill","_","symbol","src","image_url","alt","parseFloat","toFixed","defaultChecked","order","statusMap","pending","preparing","ready","delivered","currentStep","order_status","createdTime","Date","created_at","toLocaleString","updatedTime","updated_at","amount","index","item_name","style","width","toUpperCase"],"sources":["/home/user/endofhunger/dineflowreact/src/pages/CustomerPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\n\r\nfunction CustomerPage() {\r\n    // State variables\r\n    const [menuItems, setMenuItems] = useState([]);\r\n    const [cart, setCart] = useState([]);\r\n    const [currentCurrency, setCurrentCurrency] = useState('INR');\r\n    const [searchParams] = useSearchParams();\r\n    const [tableNumber, setTableNumber] = useState(() => {\r\n        return parseInt(searchParams.get('table') || '1');\r\n    });\r\n    const [tables, setTables] = useState([]);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [activeCategory, setActiveCategory] = useState('all');\r\n    const [isCartModalOpen, setIsCartModalOpen] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [showOrderSuccess, setShowOrderSuccess] = useState(false);\r\n    const [orderId, setOrderId] = useState(null);\r\n    const [showToast, setShowToast] = useState(false);\r\n    const [isOrdersModalOpen, setIsOrdersModalOpen] = useState(false);\r\n    const [customerOrders, setCustomerOrders] = useState([]);\r\n    // Add this line with other state variables\r\n    const [categories, setCategories] = useState([]);\r\n    const { currentUser, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n    \r\n\r\n    const API_URL = 'http://localhost:5000'; // Backend server URL\r\n\r\n    // --- Helper Functions ---\r\n    const generateFoodImageURL = (itemName, imageUrl) => {\r\n        // If we have an image_url from the database, use it\r\n        if (imageUrl) {\r\n            // If it's a relative path, prepend the API URL\r\n            if (imageUrl.startsWith('/uploads/')) {\r\n                return `${API_URL}${imageUrl}`;\r\n            }\r\n            // If it's already a full URL, use it as is\r\n            return imageUrl;\r\n        }\r\n        \r\n        // Fallback to placeholder images if no image_url is available\r\n        const normalizedName = itemName.toLowerCase().trim();\r\n        const foodImageMap = {\r\n            'margherita pizza': 'https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',\r\n            'chicken biryani': 'https://images.unsplash.com/photo-1589302168068-964a4e1a9eb4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',\r\n            'paneer tikka': 'https://images.unsplash.com/photo-1569957485519-258992c2e8b6?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',\r\n            'caesar salad': 'https://images.unsplash.com/photo-1550304963-4a56a14c3df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',\r\n            'masala dosa': 'https://images.unsplash.com/photo-1589302168068-964a4e1a9eb4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',\r\n            'chocolate brownie': 'https://images.unsplash.com/photo-1606313564200-e75d5e30476c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',\r\n        };\r\n        return foodImageMap[normalizedName] || `https://picsum.photos/seed/${normalizedName.replace(/\\s+/g, '')}/400/300.jpg`;\r\n    };\r\n    \r\n    const handleLogout = () => {\r\n        logout();\r\n        navigate('/login');\r\n    };\r\n    \r\n    const getAuthHeaders = () => {\r\n        const token = localStorage.getItem('token');\r\n        return token ? { 'Authorization': `Bearer ${token}` } : {};\r\n    };\r\n\r\n    // --- Data Loading Functions ---\r\n    const loadTables = useCallback(async () => {\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/tables`, {\r\n                headers: {\r\n                    ...getAuthHeaders(),\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setTables(data.data);\r\n            } else {\r\n                console.error('API Error:', data.message);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading tables:', error);\r\n        }\r\n    }, []);\r\n    \r\n    const loadCategories = useCallback(async () => {\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/categories`, {\r\n                headers: {\r\n                    ...getAuthHeaders(),\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setCategories(data.data);\r\n            } else {\r\n                // Fallback to default categories if API fails\r\n                setCategories(['Appetizer', 'Main Course', 'Dessert', 'Beverage', 'Salad']);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading categories:', error);\r\n            // Fallback to default categories if API fails\r\n            setCategories(['Appetizer', 'Main Course', 'Dessert', 'Beverage', 'Salad']);\r\n        }\r\n    }, []);\r\n\r\n        const loadMenu = useCallback(async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/menu`, {\r\n                headers: {\r\n                    ...getAuthHeaders(),\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n            \r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                console.error('Menu error response:', errorText);\r\n                throw new Error(`Server responded with ${response.status}: ${errorText}`);\r\n            }\r\n            \r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setMenuItems(data.data);\r\n            } else {\r\n                console.error('API Error:', data.message);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading menu:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [API_URL]); // Add API_URL as dependency\r\n\r\n    const loadCustomerOrders = useCallback(async () => {\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/orders?table_number=${tableNumber}`, {\r\n                headers: {\r\n                    ...getAuthHeaders(),\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setCustomerOrders(data.data);\r\n            } else {\r\n                console.error('API Error:', data.message);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading customer orders:', error);\r\n        }\r\n    }, [tableNumber]);\r\n\r\n    // --- Cart Functions ---\r\n    const addToCart = (itemId) => {\r\n        const item = menuItems.find(i => i.id === itemId);\r\n        if (!item) return;\r\n        setCart(currentCart => {\r\n            const existingItem = currentCart.find(i => i.id === itemId);\r\n            if (existingItem) {\r\n                return currentCart.map(i => i.id === itemId ? { ...i, quantity: i.quantity + 1 } : i);\r\n            } else {\r\n                return [...currentCart, { ...item, quantity: 1 }];\r\n            }\r\n        });\r\n        setShowToast(true);\r\n        setTimeout(() => setShowToast(false), 3000);\r\n    };\r\n\r\n    const removeFromCart = (itemId) => {\r\n        setCart(currentCart => currentCart.filter(i => i.id !== itemId));\r\n    };\r\n\r\n    const updateQuantity = (itemId, change) => {\r\n        setCart(currentCart => {\r\n            return currentCart.map(item => {\r\n                if (item.id === itemId) {\r\n                    const newQuantity = item.quantity + change;\r\n                    return newQuantity > 0 ? { ...item, quantity: newQuantity } : null;\r\n                }\r\n                return item;\r\n            }).filter(Boolean);\r\n        });\r\n    };\r\n\r\n    const placeOrder = async () => {\r\n        if (cart.length === 0) return;\r\n        const paymentMethod = document.querySelector('input[name=\"payment-method\"]:checked')?.value || 'cash';\r\n        const orderData = { \r\n            table_number: tableNumber, \r\n            items: cart.map(i => ({ \r\n                id: i.id, \r\n                quantity: i.quantity, \r\n                price_inr: i.price_inr, \r\n                price_usd: i.price_usd,\r\n                name: i.name\r\n            })), \r\n            currency: currentCurrency, \r\n            payment_method: paymentMethod \r\n        };\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/orders`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    ...getAuthHeaders(),\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(orderData)\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setOrderId(data.data.id);\r\n                setShowOrderSuccess(true);\r\n                setCart([]);\r\n                setIsCartModalOpen(false);\r\n            } else {\r\n                alert('Failed to place order. Please try again.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error placing order:', error);\r\n            alert('Error placing order. Please try again.');\r\n        }\r\n    };\r\n\r\n    // --- Derived State ---\r\n    \r\n    const filteredMenu = menuItems.filter(item => {\r\n        const matchesCategory = activeCategory === 'all' || item.category === activeCategory;\r\n        const matchesSearch = item.name.toLowerCase().includes(searchTerm) || (item.description && item.description.toLowerCase().includes(searchTerm));\r\n        return matchesCategory && matchesSearch;\r\n    });\r\n    const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);\r\n    const cartTotal = cart.reduce((sum, item) => {\r\n        const price = currentCurrency === 'INR' ? item.price_inr : item.price_usd;\r\n        return sum + (price * item.quantity);\r\n    }, 0);\r\n\r\n    // --- useEffect Hooks ---\r\n    useEffect(() => {\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        const tableFromUrl = parseInt(urlParams.get('table') || '1');\r\n        setTableNumber(tableFromUrl);\r\n        loadTables();\r\n        loadMenu();\r\n        loadCategories();\r\n    }, [loadTables, loadMenu, loadCategories]);\r\n\r\n    useEffect(() => {\r\n        if (isOrdersModalOpen) {\r\n            loadCustomerOrders();\r\n        }\r\n    }, [isOrdersModalOpen, loadCustomerOrders]);\r\n\r\n    // --- Render Logic ---\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            {/* Top Cart Bar */}\r\n            <div className=\"top-cart\">\r\n                <div className=\"gradient-bg text-white p-3 sm:p-4\">\r\n                    <div className=\"container mx-auto\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <div className=\"flex items-center\">\r\n                                <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-full flex items-center justify-center mr-2 sm:mr-3\">\r\n                                    <i className=\"fas fa-utensils text-blue-600 text-sm sm:text-base\"></i>\r\n                                </div>\r\n                                <div>\r\n                                    <h1 className=\"text-lg sm:text-2xl font-bold\">Menu</h1>\r\n                                    <p className=\"text-blue-100 text-xs sm:text-sm flex items-center\">\r\n                                        <i className=\"fas fa-chair mr-1\"></i> Table #<span>{tableNumber}</span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 sm:gap-4\">\r\n                                <div className=\"bg-white/20 backdrop-blur-sm rounded-lg p-1 sm:p-2\">\r\n                                    <select value={currentCurrency} onChange={(e) => setCurrentCurrency(e.target.value)} className=\"bg-transparent text-white px-2 sm:px-3 py-1 sm:py-2 rounded-lg border-none outline-none text-xs sm:text-sm\">\r\n                                        <option value=\"INR\" className=\"text-gray-800\">₹ INR</option>\r\n                                        <option value=\"USD\" className=\"text-gray-800\">$ USD</option>\r\n                                    </select>\r\n                                </div>\r\n                                <button onClick={() => setIsOrdersModalOpen(true)} className=\"bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition\">\r\n                                    <i className=\"fas fa-clipboard-list text-white\"></i>\r\n                                </button>\r\n                                <button onClick={() => setIsCartModalOpen(true)} className=\"bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition relative\">\r\n                                    <i className=\"fas fa-shopping-cart text-white\"></i>\r\n                                    <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center cart-badge\">{cartCount}</span>\r\n                                </button>\r\n                                <button onClick={handleLogout} className=\"bg-white/20 backdrop-blur-sm rounded-lg p-2 sm:p-3 hover:bg-white/30 transition\">\r\n                                    <i className=\"fas fa-sign-out-alt text-white\"></i>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"container mx-auto px-3 sm:px-4 py-4 sm:py-6\">\r\n                {/* Search and Filter Section */}\r\n                <div className=\"mb-4 sm:mb-6\">\r\n                    <div className=\"relative mb-4\">\r\n                        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                            <i className=\"fas fa-search text-gray-400\"></i>\r\n                        </div>\r\n                        <input type=\"text\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder=\"Search for dishes, ingredients...\" className=\"w-full pl-10 pr-4 py-2 sm:py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm text-sm sm:text-base input-focus\" />\r\n                    </div>\r\n                    <div className=\"flex gap-2 mb-4\">\r\n                        <select value={tableNumber} onChange={(e) => setTableNumber(parseInt(e.target.value))} className=\"flex-1 px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 text-sm input-focus\">\r\n                            {tables.map(table => <option key={table.id} value={table.table_number}>{table.table_name}</option>)}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"mb-4 sm:mb-6\">\r\n                    <div className=\"flex gap-2 overflow-x-auto pb-2 px-1 -mx-1 scrollbar-hide\">\r\n                        <button \r\n                            onClick={() => setActiveCategory('all')} \r\n                            className={`category-pill px-3 sm:px-4 py-1.5 sm:py-2 rounded-full font-medium whitespace-nowrap flex items-center text-xs sm:text-sm flex-shrink-0 ${\r\n                                activeCategory === 'all' ? 'active text-white' : 'bg-gray-200 text-gray-700'\r\n                            }`}\r\n                        >\r\n                            <i className=\"fas fa-border-all mr-1 sm:mr-2\"></i>All\r\n                        </button>\r\n                        {categories.map(cat => (\r\n                            <button \r\n                                key={cat} \r\n                                onClick={() => setActiveCategory(cat)} \r\n                                className={`category-pill px-3 sm:px-4 py-1.5 sm:py-2 rounded-full font-medium whitespace-nowrap flex items-center text-xs sm:text-sm flex-shrink-0 ${\r\n                                    activeCategory === cat ? 'active text-white' : 'bg-gray-200 text-gray-700'\r\n                                }`}\r\n                            >\r\n                                <i className=\"fas fa-utensils mr-1 sm:mr-2\"></i>{cat}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                </div>\r\n\r\n                {/* Menu Items */}\r\n                {isLoading ? (\r\n                    <div className=\"menu-grid grid gap-4 sm:gap-6\">\r\n                        {Array(6).fill().map((_, i) => (\r\n                            <div key={i} className=\"bg-white rounded-xl shadow-md overflow-hidden\">\r\n                                <div className=\"h-48 shimmer\"></div>\r\n                                <div className=\"p-4\"><div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2 shimmer\"></div><div className=\"h-3 bg-gray-200 rounded w-full mb-1 shimmer\"></div><div className=\"h-3 bg-gray-200 rounded w-5/6 mb-3 shimmer\"></div><div className=\"flex justify-between items-center\"><div className=\"h-6 bg-gray-200 rounded w-20 shimmer\"></div><div className=\"h-10 bg-gray-200 rounded-lg w-28 shimmer\"></div></div></div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"menu-grid grid gap-4 sm:gap-6\">\r\n                        {filteredMenu.length === 0 ? (\r\n                            <div className=\"col-span-full bg-gray-50 rounded-xl p-8 text-center\">\r\n                                <i className=\"fas fa-search text-gray-400 text-4xl mb-4\"></i>\r\n                                <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">No items found</h3>\r\n                                <p className=\"text-gray-500\">Try adjusting your search or filter criteria</p>\r\n                            </div>\r\n                        ) : (\r\n                            filteredMenu.map(item => {\r\n                                const price = currentCurrency === 'INR' ? item.price_inr : item.price_usd;\r\n                                const symbol = currentCurrency === 'INR' ? '₹' : '$';\r\n                                return (\r\n                                    <div key={item.id} className=\"menu-card bg-white rounded-xl shadow-md overflow-hidden card-shadow\">\r\n                                        <div className=\"relative h-40 sm:h-48 overflow-hidden\">\r\n                                            <img src={generateFoodImageURL(item.name, item.image_url)} alt={item.name} className=\"w-full h-full object-cover food-image\" />\r\n                                            <div className=\"absolute top-2 right-2\">\r\n                                                <span className=\"bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full text-xs font-medium text-gray-700\">{item.category}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"p-3 sm:p-4\">\r\n                                            <h3 className=\"text-base sm:text-lg font-semibold text-gray-900 mb-1\">{item.name}</h3>\r\n                                            <p className=\"text-xs sm:text-sm text-gray-600 mb-3 line-clamp-2\">{item.description || 'Delicious dish prepared with fresh ingredients'}</p>\r\n                                            <div className=\"flex justify-between items-center\">\r\n                                                <div className=\"price-tag text-white px-2 sm:px-3 py-1 rounded-full font-bold text-xs sm:text-sm\">\r\n                                                    {symbol}{parseFloat(price).toFixed(2)}\r\n                                                </div>\r\n                                                <button onClick={() => addToCart(item.id)} className=\"btn-add bg-blue-600 hover:bg-blue-700 text-white font-medium py-1.5 sm:py-2 px-3 sm:px-4 rounded-lg transition duration-200 flex items-center text-xs sm:text-sm\">\r\n                                                    <i className=\"fas fa-plus mr-1\"></i> Add\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Floating Cart Button (Mobile) */}\r\n            <button onClick={() => setIsCartModalOpen(true)} className=\"floating-cart bg-blue-600 hover:bg-blue-700 text-white btn-primary\">\r\n                <i className=\"fas fa-shopping-cart text-xl\"></i>\r\n                <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center cart-badge\">{cartCount}</span>\r\n            </button>\r\n\r\n            {/* Cart Modal */}\r\n            {isCartModalOpen && (\r\n                <div className=\"fixed inset-0 modal-backdrop z-50 flex items-end sm:items-center justify-center\">\r\n                    <div className=\"bg-white w-full sm:max-w-lg sm:rounded-2xl rounded-t-2xl modal-content shadow-2xl\">\r\n                        <div className=\"sticky top-0 bg-white border-b border-gray-200 p-4 flex justify-between items-center z-10\">\r\n                            <h2 className=\"text-xl font-bold flex items-center\"><i className=\"fas fa-shopping-cart mr-2 text-blue-600\"></i>Your Cart</h2>\r\n                            <button onClick={() => setIsCartModalOpen(false)} className=\"text-gray-500 hover:text-gray-700 text-2xl transition\"><i className=\"fas fa-times\"></i></button>\r\n                        </div>\r\n                        <div className=\"p-4 space-y-3 max-h-96 overflow-y-auto\">\r\n                            {cart.length === 0 ? <p className=\"text-gray-500 text-center py-8\">Your cart is empty</p> : cart.map(item => {\r\n                                const price = currentCurrency === 'INR' ? item.price_inr : item.price_usd;\r\n                                const symbol = currentCurrency === 'INR' ? '₹' : '$';\r\n                                return (\r\n                                    <div key={item.id} className=\"cart-item bg-gray-50 rounded-lg p-3\">\r\n                                        <div className=\"flex gap-3\">\r\n                                            <img src={generateFoodImageURL(item.name, item.image_url)} alt={item.name} className=\"w-16 h-16 rounded-lg object-cover\" />\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex justify-between items-start mb-2\">\r\n                                                    <div><h4 className=\"font-semibold\">{item.name}</h4><p className=\"text-sm text-gray-600\">{symbol}{parseFloat(price).toFixed(2)} each</p></div>\r\n                                                    <button onClick={() => removeFromCart(item.id)} className=\"text-red-500 hover:text-red-700 transition\"><i className=\"fas fa-trash-alt\"></i></button>\r\n                                                </div>\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <div className=\"flex items-center space-x-3\">\r\n                                                        <button onClick={() => updateQuantity(item.id, -1)} className=\"quantity-btn w-8 h-8 rounded-full bg-gray-300 hover:bg-gray-400 flex items-center justify-center\"><i className=\"fas fa-minus text-xs\"></i></button>\r\n                                                        <span className=\"font-semibold w-8 text-center\">{item.quantity}</span>\r\n                                                        <button onClick={() => updateQuantity(item.id, 1)} className=\"quantity-btn w-8 h-8 rounded-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center\"><i className=\"fas fa-plus text-xs\"></i></button>\r\n                                                    </div>\r\n                                                    <span className=\"font-bold text-blue-600\">{symbol}{(price * item.quantity).toFixed(2)}</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                        <div className=\"border-t border-gray-200 p-4 sticky bottom-0 bg-white\">\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2 flex items-center\"><i className=\"fas fa-credit-card mr-2\"></i>Payment Method</label>\r\n                                <div className=\"grid grid-cols-2 gap-3\">\r\n                                    <label className=\"payment-option border-2 border-gray-200 rounded-lg p-3 cursor-pointer hover:border-blue-500 transition\">\r\n                                        <input type=\"radio\" name=\"payment-method\" value=\"cash\" className=\"sr-only\" defaultChecked />\r\n                                        <div className=\"text-center\"><i className=\"fas fa-money-bill-wave text-2xl text-green-600 mb-1\"></i><p className=\"text-sm font-medium\">Cash</p><p className=\"text-xs text-gray-500\">Pay at table</p></div>\r\n                                    </label>\r\n                                    <label className=\"payment-option border-2 border-gray-200 rounded-lg p-3 cursor-pointer hover:border-blue-500 transition\">\r\n                                        <input type=\"radio\" name=\"payment-method\" value=\"online\" className=\"sr-only\" />\r\n                                        <div className=\"text-center\"><i className=\"fas fa-mobile-alt text-2xl text-blue-600 mb-1\"></i><p className=\"text-sm font-medium\">Online</p><p className=\"text-xs text-gray-500\">Digital payment</p></div>\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-between items-center mb-4\">\r\n                                <span className=\"text-lg font-semibold\">Total:</span>\r\n                                <span className=\"text-2xl font-bold text-blue-600\">{currentCurrency === 'INR' ? '₹' : '$'}{cartTotal.toFixed(2)}</span>\r\n                            </div>\r\n                            <button onClick={placeOrder} className=\"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition duration-200 flex items-center justify-center\">\r\n                                <i className=\"fas fa-check-circle mr-2\"></i>Place Order\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Orders Modal */}\r\n            {isOrdersModalOpen && (\r\n                <div className=\"fixed inset-0 modal-backdrop z-50 flex items-end sm:items-center justify-center\">\r\n                    <div className=\"bg-white w-full sm:max-w-lg sm:rounded-2xl rounded-t-2xl modal-content shadow-2xl\">\r\n                        <div className=\"sticky top-0 bg-white border-b border-gray-200 p-4 flex justify-between items-center z-10\">\r\n                            <h2 className=\"text-xl font-bold flex items-center\"><i className=\"fas fa-clipboard-list mr-2 text-blue-600\"></i>Your Orders</h2>\r\n                            <button onClick={() => { setIsOrdersModalOpen(false); setCustomerOrders([]); }} className=\"text-gray-500 hover:text-gray-700 text-2xl transition\"><i className=\"fas fa-times\"></i></button>\r\n                        </div>\r\n                        <div className=\"p-4 space-y-3 max-h-96 overflow-y-auto\">\r\n                            {customerOrders.length === 0 ? <p className=\"text-gray-500 text-center py-8\">No orders placed yet</p> : customerOrders.map(order => {\r\n                                const statusMap = {\r\n                                    pending: 1,\r\n                                    preparing: 2,\r\n                                    ready: 3,\r\n                                    delivered: 4\r\n                                };\r\n                                const currentStep = statusMap[order.order_status] || 0;\r\n                                const createdTime = new Date(order.created_at).toLocaleString();\r\n                                const updatedTime = order.updated_at ? new Date(order.updated_at).toLocaleString() : 'N/A';\r\n                                const symbol = order.currency === 'INR' ? '₹' : '$';\r\n                                const amount = order[`total_amount_${order.currency.toLowerCase()}`];\r\n                                return (\r\n                                    <div key={order.id} className=\"order-item bg-gray-50 rounded-lg p-3\">\r\n                                        <h4 className=\"font-semibold mb-2\">Order #{order.id} - {createdTime}</h4>\r\n                                        <div className=\"mb-2\">\r\n                                            {order.items.map((item, index) => (\r\n                                                <div key={index} className=\"text-sm\">{item.quantity}x {item.item_name}</div>\r\n                                            ))}\r\n                                        </div>\r\n                                        <div className=\"flex justify-between text-sm mb-2\">\r\n                                            <span>Total: {symbol}{parseFloat(amount).toFixed(2)}</span>\r\n                                            <span>Payment: {order.payment_method}</span>\r\n                                        </div>\r\n                                        <div className=\"timeline flex justify-between items-center relative\">\r\n                                            <div className=\"absolute top-1/2 left-0 w-full h-1 bg-gray-300 -translate-y-1/2\"></div>\r\n                                            <div className=\"absolute top-1/2 left-0 w-full h-1 bg-blue-600 -translate-y-1/2\" style={{width: `${(currentStep / 4) * 100}%`}}></div>\r\n                                            <div className={`step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs ${currentStep >= 1 ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-600'}`}>\r\n                                                <i className=\"fas fa-clock\"></i>\r\n                                            </div>\r\n                                            <div className={`step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs ${currentStep >= 2 ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-600'}`}>\r\n                                                <i className=\"fas fa-fire\"></i>\r\n                                            </div>\r\n                                            <div className={`step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs ${currentStep >= 3 ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-600'}`}>\r\n                                                <i className=\"fas fa-check\"></i>\r\n                                            </div>\r\n                                            <div className={`step z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs ${currentStep >= 4 ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-600'}`}>\r\n                                                <i className=\"fas fa-truck\"></i>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between text-xs mt-1\">\r\n                                            <span>Ordered</span>\r\n                                            <span>Preparing</span>\r\n                                            <span>Ready</span>\r\n                                            <span>Delivered</span>\r\n                                        </div>\r\n                                        <div className=\"text-xs text-center mt-2\">\r\n                                            Current Status: {order.order_status.toUpperCase()} at {updatedTime}\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Order Success Modal */}\r\n            {showOrderSuccess && (\r\n                <div className=\"fixed inset-0 bg-black/50 modal-backdrop z-50 flex items-center justify-center\">\r\n                    <div className=\"bg-white rounded-2xl p-8 max-w-sm mx-4 text-center\">\r\n                        <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <i className=\"fas fa-check text-green-600 text-2xl\"></i>\r\n                        </div>\r\n                        <h3 className=\"text-xl font-bold mb-2\">Order Placed Successfully!</h3>\r\n                        <p className=\"text-gray-600 mb-4\">Order ID: #{orderId}</p>\r\n                        <p className=\"text-sm text-gray-500 mb-6\">Your order will be prepared shortly</p>\r\n                        <button onClick={() => setShowOrderSuccess(false)} className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition\">OK</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Toast Notification */}\r\n            <div id=\"toast\" className={`toast ${showToast ? 'show' : ''}`}>\r\n                <i className=\"fas fa-check-circle\"></i>\r\n                <span id=\"toast-message\">Item added to cart!</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CustomerPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}